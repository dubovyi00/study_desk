{"version":3,"sources":["../node_modules/typescript/lib sync","NativeWebRouteWrapper/index.js","constants.js","authorization_module/AuthActivity.js","SplashActivity.js","chat_module/Socket.js","components/ThemedCard.js","chat_module/ChatActivity.js","converter_module/ConverterActivity.js","schedule_module/components/Discipline.js","schedule_module/components/DisciplineInfo.js","schedule_module/components/ActionItem.js","schedule_module/components/DayIcon.js","schedule_module/ScheduleActivity.js","student_module/StudentActivity.js","teacher_module/TeacherActivity.js","task_module/TaskActivity.js","TopNavStudent.js","TopNavTeacher.js","chat_module/ChatRoomsActivity.js","task_module/AddTaskActivity.js","App.js","registerServiceWorker.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Wrapper","element","history","match","routeMap","closeModal","appFunctions","redirect","React","cloneElement","navigation","navigate","to","params","url","path","Object","length","forEach","param","re","RegExp","replace","escape","modal","slash","test","push","getParam","alternative","goBack","WebRoutesGenerator","map","route","currentRoute","Component","component","props","Route","exact","render","window","Dimensions","get","w","width","componentTitleSize","height","DEFAULT_TEACHER_PORTRAIT","theme","DarkTheme","dark","colors","accent","text2","background","card","boxShadow","textColor","backgroundColor","baseURL","domainURL","echo","message","alert","AuthActivity","state","email","password","buttonActive","onPressLogin","a","_isMounted","setState","data","username","fetch","mode","method","body","JSON","stringify","headers","response","console","log","ok","json","result","AsyncStorage","setItem","access_token","refresh_token","is_student","accessToken","refreshToken","isStudent","this","View","style","styles","container","Image","img","source","uri","Text","header","TextInput","type","name","input","onChangeText","value","placeholder","placeholderTextColor","onSubmitEditing","secureTextEntry","buttoncase","Button","color","disabled","title","onPress","StyleSheet","create","margin","flex","justifyContent","alignItems","welcome","fontSize","textAlign","marginBottom","paddingLeft","borderRadius","text","SplashActivity","baseStyles","ActivityIndicator","size","instance","WSController","ws","WebSocket","ThemedCard","Card","padding","children","renderBubble","wrapperStyle","right","renderSend","containerStyle","alignSelf","marginRight","MaterialCommunityIcons","renderInputToolbar","textInputProps","blurOnSubmit","Platform","OS","onSend","trim","undefined","textInputStyle","ChatActivity","useState","messages","setMessages","token","setToken","roomId","myId","ids","setIds","room_id","my_id","startWithToken","getItem","user_profile","parse","useEffect","access_token_cookie","refresh_token_cookie","status","tryRefreshToken","error","onopen","send","ms_type","controller","onmessage","previousMessages","GiftedChat","prepend","onerror","onclose","nullify","reason","close","useCallback","readyState","mainBox","contentContainerStyle","flexDirection","locale","inverted","user","_id","maxWidth","select","android","ConverterActivity","ChooseFile","getDocumentAsync","multiple","copyToCacheDirectory","then","file","indexOf","exec","toLocaleLowerCase","extension","substring","isAllowedType","split","isConverted","resultConverted","files","concat","fileLoc","FileSystem","encoding","raw","uriFile","catch","err","Convert","isLoading","DownloadFile","Linking","openURL","ItemMoveUp","key","newFiles","bufFile","ItemMoveDown","ItemDelete","filter","_","i","Date","setHours","bytes","parseInt","Math","floor","round","pow","inputBox","headerText","disclaimer","selectFileBox","filesListView","prop","listview","listItemHeader","bytesToSize","listItemButton","fileListBox","listviewBox","convertFileBox","outputBox","downloadFileBox","ScrollView","mainScroll","paddingBottom","fontWeight","default","marginLeft","marginTop","Discipline","textStyle","titleStyle","viewStyle","positionStyle","TouchableHighlight","discipline","underlayColor","POSITION","DISCIPLINE_NAME","START_TIME","END_TIME","FIO_TEACHER1","FIO_TEACHER2","WEEK","SYM_ROOM","STUDY_GROUP","elevation","DisciplineInfo","underline","teacher","NAME","SURNAME","PATRONYMIC","CABINET","MAIN_SUBDIVISION","EMAIL","SITE_LINK","PORTRAIT_URL","profile_fields_box","selectable","flexShrink","textDecorationLine","infoBox","ActionItem","chosenStyle","reViewStyle","prototype","getWeek","date","getTime","setDate","getDate","getDay","week1","getFullYear","getMonthName","getMonth","LocaleConfig","locales","monthNames","monthNamesShort","dayNames","dayNamesShort","today","defaultLocale","ScheduleActivity","updateDay","newDate","disArr","currentDay","weekNum","weekOffset","newWeekNum","findCurrentDisciplines","currentdisArr","isExtended","chooseDisciplineTeacher","item","DAY_DATE","chooseDiscipline","makeIdsArray","teachers","teachersArr","cancelDiscepline","loadWeekNumber","loadStudentData","info","ID","SYM_GROUP","SYM_FACULTET","ID_PLAN","YEAR_ADMISSION","ID_SPECIALIZATION","ID_FACULTET","ID_GROUP","loadScheduleStudent","loadTeacherID","responseId","resultId","ID_PERSON","loadTeacherData","FIO","DEGREE","POST","loadScheduleTeacher","createChat","arguments","frequency","Number","isInteger","DAY_NUMBER","FREQUENCY","local_date","toDateString","sort","b","ID_TEACHER1","ID_TEACHER2","ID_TEACHER3","ID_TEACHER4","description","textTitleStyle","center","calendar","DayIconArr","mondayDate","index","dateInWeek","extraBox","minWidth","time","group","encodeURIComponent","flexWrap","onDayPress","newdate","year","month","day","current","renderArrow","direction","firstDay","calendarBackground","textSectionTitleColor","textSectionTitleDisabledColor","selectedDayBackgroundColor","selectedDayTextColor","todayTextColor","dayTextColor","textDisabledColor","dotColor","selectedDotColor","arrowColor","disabledArrowColor","monthTextColor","indicatorColor","textDayFontFamily","textMonthFontFamily","textDayHeaderFontFamily","textDayFontWeight","textMonthFontWeight","textDayHeaderFontWeight","textDayFontSize","textMonthFontSize","textDayHeaderFontSize","dayListStyle","paddingHorizontal","marginVertical","bufferedState","bufferedSolutions","StudentActivity","loadUserData","loadUserTasks","solutions","tmp","searchBufferedSolutions","newBufSolutions","addFile","Confirm","exitApp","activatedExitButton","setTimeout","removeItem","image","profileBox","position","zIndex","TouchableOpacity","field_name","field_group","extendButton","addButton","downloadButtton","confirmButton","deleteButton","field_description","methods","taskFiles","paddingEnd","solutionsListBox","fileName","minutes","getMinutes","strDate","getHours","innerText","buttons","field_task","solutionsBox","field_info","TeacherActivity","ItemOpenInfo","sol","SubmitTeacherAnswer","ans","conclusion","solution_id","ItemAccept","ItemDeny","chairBox","cabinetBox","degreeBox","student_name","field_checkedHeader","main","button","overflow","headerFontSize","icon","withRouter","location","pathname","bigScreen","navButtons","href","startsWith","bufferedChats","bufferedId","ChatRoomsActivity","setRooms","setMyId","useNavigation","rooms","usr_id","useLayoutEffect","renderItem","nopadding","dialogBox","user_id","companionName","chatListBox","noChatsPlaceholder","AddTaskActivity","isAdded","Save","decodeURIComponent","ToastAndroid","show","SHORT","inputTextBox","multiline","numberOfLines","applyBox","borderWidth","borderColor","App","getToken","callback","addEventListener","resize","bind","innerWidth","removeEventListener","Home","Schedule","Converter","ChatRooms","Chat","AddTask","checkToken","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","ReactDOM","document","getElementById","URL","process","origin","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.638e9a9e.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 211;","import { Route } from \"react-router-dom\";\r\nimport { ModalRoute } from \"react-router-modal\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"react-router-modal/css/react-router-modal.css\";\r\n\r\nfunction Wrapper({ element, history, match, routeMap, closeModal, appFunctions, redirect }) {\r\n  const navigate = (to, params) => {\r\n    let url = routeMap[to].path;\r\n    // replace params ids in the url with actual values\r\n    if (params && Object.keys(params).length > 0) {\r\n      Object.keys(params).forEach(param => {\r\n        const re = RegExp(`\\:${param}\\\\??`); // eslint-disable-line no-useless-escape\r\n        url = url.replace(re, escape(params[param]));\r\n      });\r\n    }\r\n    // removing empty params from url - every string between /: and ?\r\n    url = url.replace(/\\/:(.*?)(?=\\/|$)/g, \"\");\r\n    // if the route is not a modal\r\n    if (!routeMap[to].modal) {\r\n      history.push(url);\r\n      // if the route is a modal\r\n    } else {\r\n      // checking if the url ends with a slash or not\r\n      const slash = /\\/$/.test(match.url) ? \"\" : \"/\";\r\n      // current url in the browser + slash + modal url with parameters\r\n      url = match.url + slash + url;\r\n      // removing the */ from the url\r\n      url = url.replace(/\\*\\/?/g, \"\");\r\n      history.push(url);\r\n    }\r\n  };\r\n\r\n  const getParam = (param, alternative) => {\r\n    return match.params[param] || alternative;\r\n  };\r\n\r\n  const goBack = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  return React.cloneElement(element, {\r\n    navigation: { navigate, getParam, goBack },\r\n    appFunctions,\r\n    closeModal\r\n  });\r\n}\r\n\r\nWrapper.propTypes = {\r\n  element: PropTypes.element,\r\n  history: PropTypes.object,\r\n  routeMap: PropTypes.object,\r\n  appFunctions: PropTypes.object,\r\n  closeModal: PropTypes.func,\r\n  match: PropTypes.object\r\n};\r\n\r\nconst WebRoutesGenerator = ({ routeMap, appFunctions }) => {\r\n  return Object.keys(routeMap).map(route => {\r\n    const currentRoute = routeMap[route];\r\n    const Component = currentRoute.component;\r\n    if (currentRoute.modal) {\r\n      return (\r\n        <ModalRoute\r\n          key={currentRoute.path}\r\n          path={currentRoute.path}\r\n          component={props => (\r\n            <Wrapper element={<Component />} {...props} routeMap={routeMap} appFunctions={appFunctions} />\r\n          )}\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <Route\r\n          key={currentRoute.path}\r\n          path={currentRoute.path}\r\n          exact={currentRoute.exact}\r\n          render={props => (\r\n            <Wrapper element={<Component />} {...props} routeMap={routeMap} appFunctions={appFunctions} />\r\n          )}\r\n        />\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\nWebRoutesGenerator.propTypes = {\r\n  routeMap: PropTypes.object\r\n};\r\n\r\nexport default WebRoutesGenerator;\r\n","import { Dimensions } from 'react-native'\r\nimport { DarkTheme, DefaultTheme } from '@react-navigation/native';\r\n\r\n//размеры экрана устройства\r\nconst window =Dimensions.get('window');\r\nexport const w = window.width;\r\nexport const h = window.height;\r\n\r\n\r\n// component... для мелких фрагментов\r\nexport const componentFontSize = 16;\r\nexport const componentTitleSize = 18;\r\nexport const headerFontSize = 24;\r\n\r\n//для правильной прокрутки ScrollView\r\nexport const paddingBottomScroll= 450;\r\n\r\nexport const marginComponent = 8;\r\nexport const paddingComponent = 6;\r\n\r\nexport const borderRadius = 3;\r\nexport const borderWidth = 1;\r\nexport const elevation = 2; ///тень\r\n\r\n//старая тема\r\n/*export const boxShadow = \"1px 1px 1px grey\"\r\nexport const borderColor = '#000';\r\n\r\nexport const textColor ='#000';\r\nexport const textExtraColor ='#383838';\r\n\r\nexport const mainColor ='#fff';\r\nexport const backgroundColor = '#dfede9';\r\nexport const navIconsColorActive = 'green';/// цвет кнопок всех\r\nexport const navIconsColorInactive = 'grey';*/\r\n\r\n\r\n//golden color: \"#C89D66\"\r\nexport const DEFAULT_TEACHER_PORTRAIT = \"https://sd.randgor.ru/app/teacher_placeholder.png\"\r\nexport const DEFAULT_STUDENT_PORTRAIT = \"https://sd.randgor.ru/app/student_placeholder.png\"\r\n\r\nexport const theme = {\r\n    ...DarkTheme,\r\n    dark: true,\r\n    colors: {\r\n        ...DarkTheme.colors,\r\n        accent: \"#C89D66\",\r\n        text2: \"#999999\",\r\n        background: \"#222226\",\r\n        card: \"#333336\"\r\n    },\r\n}\r\n\r\n\r\n//светлая тема\r\nexport const boxShadow = \"1px 1px 1px grey\"\r\nexport const borderColor = '#000';\r\n\r\nexport const textColor ='#000';\r\nexport const textExtraColor ='#383838';\r\n\r\nexport const mainColor ='#fff';\r\nexport const backgroundColor = theme.colors.background;\r\nexport const navIconsColorActive = theme.colors.accent;/// цвет кнопок всех\r\nexport const navIconsColorInactive = theme.colors.text2;\r\n\r\n\r\n\r\n\r\n//api\r\n//export const domainURL = \"http://192.168.1.3:5000\"\r\nexport const domainURL = \"https://sd.randgor.ru\"\r\nexport const baseURL = domainURL + \"/api\"","import React, { useState } from \"react\";\r\nimport { View, Text, Image, StyleSheet, TextInput, Button, Alert } from \"react-native\";\r\n\r\nimport {\r\n  baseURL,\r\n  borderRadius,\r\n  borderWidth,\r\n  textColor,\r\n  theme,DEFAULT_STUDENT_PORTRAIT\r\n} from '../constants'\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n\r\n\r\nfunction echo (message) {\r\n  alert(message)\r\n}\r\n\r\nclass AuthActivity extends React.Component {\r\n  state = {\r\n    email: '', password: '', buttonActive: true\r\n  }\r\n\r\n  onPressLogin =async(state) =>{\r\n      if(!state.buttonActive)\r\n          return;\r\n\r\n\r\n      if (state.email.length == 0) {\r\n        echo (\"Пустой email\")\r\n        return;\r\n      }\r\n      if (state.password.length == 0) {\r\n        echo (\"Пустой пароль\")\r\n        return;\r\n      }\r\n      if (/\\S+@\\S+.\\S+/.test(state.email) == 0) {\r\n        echo (\"Неверный email\")\r\n        return;\r\n      }\r\n\r\n      this._isMounted && this.setState({buttonActive:false})\r\n    \r\n      const data = {username:state.email,password:state.password}\r\n      try {\r\n        let response = await fetch(baseURL+\"/login\",{\r\n          mode: \"cors\",\r\n          method:\"POST\",\r\n          body: JSON.stringify({data}),\r\n          headers:{\r\n            \"Content-Type\": \"application/json\",\r\n          }\r\n        })\r\n        console.log(response.ok)\r\n        if(response.ok){\r\n          //redirect\r\n          let result = this._isMounted && await response.json()\r\n\r\n          try {\r\n            this._isMounted && await AsyncStorage.setItem('userProfile', JSON.stringify({access_token:result.access_token, refresh_token:result.refresh_token, is_student:result.is_student}))\r\n\r\n            this.props.appFunctions.redirect({accessToken:result.access_token, refreshToken:result.refresh_token, isStudent:result.is_student})\r\n          } catch (e) {\r\n            // saving error\r\n          }\r\n          \r\n        }\r\n        else{\r\n          let result = await response.json()\r\n          echo(result.message)\r\n        }\r\n      } catch (e) {\r\n        console.log(\"catch: \",e.message)\r\n        echo(e.message)  \r\n      }\r\n      this._isMounted && this.setState({buttonActive:true})\r\n    }\r\n\r\n  \r\n  componentDidMount(){\r\n    this._isMounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  render() {\r\n    const { navigation, route } = this.props;\r\n    const image = { uri: \"https://sd.randgor.ru/app/logo_round.png\" };\r\n    return (\r\n      <View style={styles.container}>\r\n        <Image style={styles.img}\r\n        source={image}\r\n        />\r\n        <Text style={styles.header}>\r\n          Авторизация\r\n        </Text>\r\n        <TextInput\r\n          type = \"email\"\r\n          name = {\"email\"}\r\n          style = {styles.input}\r\n          onChangeText = {email => this.setState({email:email})}\r\n          value = {this.state.email}\r\n          placeholder = {\"E-mail\"}\r\n          placeholderTextColor ={theme.colors.text2}\r\n        />\r\n        <TextInput\r\n          type = \"password\"\r\n          name = \"password\"\r\n          style = {styles.input}\r\n          onChangeText = {password => this.setState({password:password})}\r\n          value = {this.state.password}\r\n          placeholder = \"Пароль\"\r\n          placeholderTextColor ={theme.colors.text2}\r\n          onSubmitEditing = {()=> this.onPressLogin(this.state) }\r\n          secureTextEntry\r\n        />\r\n        <View style={styles.buttoncase}>\r\n          <Button\r\n            color = {theme.colors.accent}\r\n            disabled = {this.state.buttonActive?false:true}\r\n            title = {this.state.buttonActive?\"Войти\":\"Вход...\"}\r\n            onPress = {()=> this.onPressLogin(this.state) }\r\n          />\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  img: {\r\n    width:100,\r\n    height:100,\r\n    margin:16\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: theme.colors.background\r\n  },\r\n  welcome: {\r\n    fontSize: 20,\r\n    textAlign: \"center\",\r\n    margin: 10\r\n  },\r\n  input: {\r\n    height: 40,\r\n    width: 270,\r\n    marginBottom: 16,\r\n    paddingLeft: 16,\r\n    borderRadius: borderRadius,\r\n    backgroundColor: theme.colors.card,\r\n    color: theme.colors.text,\r\n  },\r\n  buttoncase: {\r\n    width: 100,\r\n    marginBottom:150\r\n  },\r\n  header: { \r\n    fontSize: 20,\r\n    marginBottom: 24,\r\n    color: theme.colors.text\r\n  }\r\n});\r\n\r\nexport default AuthActivity;","import React from \"react\";\r\nimport { View, Text, StyleSheet,ActivityIndicator } from \"react-native\";\r\n\r\nimport { theme } from './constants'\r\n\r\nclass SplashActivity extends React.Component {\r\n  render() {\r\n    const { style } = this.props;\r\n\r\n    const baseStyles = [styles.container, style];\r\n\r\n    return (\r\n      <View style={baseStyles}>\r\n        <ActivityIndicator size={70} color={theme.colors.accent} />\r\n        <Text style={styles.welcome}>Загрузка...</Text>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: theme.colors.background\r\n  },\r\n  welcome: {\r\n    fontSize: 20,\r\n    textAlign: \"center\",\r\n    margin: 10,\r\n    color: theme.colors.text2\r\n  }\r\n});\r\n\r\nexport default SplashActivity;","let instance = null;\r\n\r\nexport default class WSController{  \r\n    constructor() {\r\n        if(!instance){//null\r\n            instance = this;\r\n            this.ws = new WebSocket(\"wss://sd.randgor.ru/socket:443\")\r\n        }\r\n        \r\n        return instance;\r\n    }\r\n\r\n    nullify() {\r\n        instance = null;\r\n    }\r\n}","import React from 'react';\r\nimport { Card } from \"react-native-paper\";\r\nimport {theme} from \"../constants\";\r\n\r\nexport default class ThemedCard extends React.Component {\r\n    render() {\r\n      return (\r\n        <Card {...this.props} style={[{margin: 15, padding: 15, marginBottom: 0, backgroundColor:theme.colors.card}, this.props.style]}>\r\n          {this.props.children}\r\n        </Card>\r\n      )\r\n    }\r\n  }","import { View, Text, StyleSheet, Platform, Animated } from \"react-native\";\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport { GiftedChat, Bubble, Send, Actions,Composer,ComposerProps,SendProps, InputToolbar } from 'react-native-gifted-chat';\r\n//import Ionicons from 'react-native-vector-icons/Ionicons'\r\nimport 'dayjs/locale/ru'\r\nimport SplashActivity from \"../SplashActivity\"\r\nimport WSController from './Socket'\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nimport { baseURL, theme } from '../constants'\r\nimport { isNullishCoalesce } from \"typescript\";\r\n\r\nimport ThemedCard from \"../components/ThemedCard\"\r\n\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\n\r\n\r\nfunction renderBubble(props) {\r\n  return (\r\n    <Bubble\r\n      {...props}\r\n      wrapperStyle={{\r\n        right: {\r\n          backgroundColor: theme.colors.accent\r\n        }\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nfunction renderSend(props) {\r\n  return (\r\n      <Send\r\n        {...props}\r\n        containerStyle={{\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          alignSelf: 'center',\r\n          marginRight: 15\r\n        }}>\r\n        <MaterialCommunityIcons name='send' size={20} color={theme.colors.accent} />\r\n      </Send>\r\n  );\r\n}\r\n\r\nfunction renderComposer(props)\r\n{ return(\r\n  <Composer\r\n    {...props}\r\n    textInputProps={{\r\n      ...props.textInputProps,\r\n      // for enabling the Return key to send a message only on web\r\n      blurOnSubmit: Platform.OS === 'web',\r\n      onSubmitEditing:\r\n        Platform.OS === 'web'\r\n          ? () => {\r\n              if (props.text && props.onSend) {\r\n                props.onSend({text: props.text.trim()}, true);\r\n              }\r\n            }\r\n          : undefined,\r\n    }}\r\n  />\r\n);}\r\n\r\nfunction renderInputToolbar (props) {\r\n  //Add the extra styles via containerStyle\r\n return <InputToolbar \r\n    {...props}\r\n    textInputProps={{\r\n      ...props.textInputProps,\r\n      // for enabling the Return key to send a message only on web\r\n      blurOnSubmit: true,\r\n      onSubmitEditing:\r\n        Platform.OS === 'web'\r\n          ? () => {\r\n              if (props.text && props.onSend) {\r\n                props.onSend({text: props.text.trim()}, true);\r\n              }\r\n            }\r\n          : undefined,\r\n    }}\r\n    placeholder='Введите сообщение'\r\n    onSubmitEditing={\r\n      ()=>{console.log(\"onSubmitEditing\")}\r\n    }\r\n    textInputStyle={{ color: theme.colors.text }}\r\n    containerStyle={{\r\n      backgroundColor: theme.colors.background,\r\n    }} />\r\n}\r\n\r\n// function handlePickImage(){\r\n//   try {\r\n//     let attachedImage\r\n//     if (imageSource.uri.length > 0) {\r\n//       attachedImage = new ReactNativeFile({\r\n//         uri: imageSource.uri,\r\n//         name: 'messageImage.jpg',\r\n//         type: 'image/jpeg',\r\n//       })\r\n// }}catch(err){\r\n//   console.log(err)\r\n// }\r\n// }\r\n\r\n// function renderActions(props) {\r\n//   return (\r\n//     <Actions\r\n//       {...props}\r\n//       options={{\r\n//         ['отправить фото']: handlePickImage,\r\n//       }}\r\n//       icon={() => (\r\n//         <Ionicons name='add' size={25} color={'black'} />\r\n//       )}\r\n\r\n//       onSend={args => console.log(args)}\r\n//     />\r\n//   )\r\n// }\r\n\r\n\r\nexport default function ChatActivity(props) {\r\n\r\n  const [messages, setMessages] = useState([])\r\n  const [token, setToken] = useState({ accessToken: null, refreshToken: null })\r\n  const [ids, setIds] = useState({ roomId: -1, myId: -1 })\r\n\r\n\r\n  if (Platform.OS == 'android') {\r\n    if (ids.roomId == -1) {\r\n      let roomId = props.route.params.room_id\r\n      let myId = props.route.params.my_id\r\n      setIds({ roomId: roomId, myId: myId })\r\n    }\r\n  } else {\r\n    if (ids.roomId == -1) {\r\n\r\n      let roomId = props.navigation.getParam('room_id', -1)\r\n      let myId = props.navigation.getParam('my_id', -1)\r\n      setIds({ roomId: roomId, myId: myId })\r\n    }\r\n  }\r\n\r\n  const startWithToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      const is_student = user_profile.is_student\r\n      setToken({ accessToken: access_token, refreshToken: refresh_token })\r\n\r\n    } catch (e) {\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    startWithToken()\r\n  }, [])\r\n\r\n  useEffect(async () => {\r\n    if (token.accessToken == null) {\r\n      return\r\n    }\r\n    //console.log(\"roomid and myId in room\", ids.roomId, ids.myId)\r\n    const data = { access_token_cookie: token.accessToken, refresh_token_cookie: token.accessToken, roomId: ids.roomId }\r\n\r\n    var response\r\n    try {\r\n      response = await fetch(baseURL + \"/chat/room\", {\r\n        mode: \"cors\",\r\n        method: \"PUT\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n    } catch (err) {\r\n\r\n      console.log(\"no connection for room in useEffect\", err)\r\n      return\r\n    }\r\n    if (response.status == 200) {\r\n      try {\r\n        const result = await response.json()\r\n        //console.log(\"result in room\", result)\r\n        if (result[0]){\r\n          //setMessages(RoomsMessage.messages)/////////////\r\n          setMessages(result[0].messages)\r\n        }\r\n        else\r\n          console.log(\"empty messages array in room\")\r\n\r\n\r\n      } catch (err) {\r\n        console.log(\"chat error\", err)\r\n      }\r\n      //setConnection(true)\r\n    } else\r\n      if (response.status == 400) {\r\n        props.appFunctions.tryRefreshToken(startWithToken)\r\n      } else console.error('response status in room', response.status)\r\n\r\n  }, [token])\r\n\r\n\r\n  useEffect(() => {\r\n    let controller = new WSController()\r\n    var ws = controller.ws;\r\n\r\n    if(token.accessToken == null) return\r\n    ws.onopen = () => {\r\n      console.log(\"socket is open\", token.accessToken? \"tokens exists\":\"tokens not exist\")\r\n      ws.send(JSON.stringify({\r\n        ms_type: 1,\r\n        access_token_cookie: token.accessToken,\r\n        refresh_token_cookie: token.refreshToken,\r\n        myId: ids.myId, roomId: ids.roomId\r\n      }));\r\n    };\r\n  },[token])\r\n\r\n  useEffect(() => {\r\n    let controller = new WSController()\r\n    var ws = controller.ws;\r\n\r\n    ws.onmessage = (response) => {\r\n      var message = JSON.parse(response.data)\r\n      setMessages(previousMessages => GiftedChat.prepend(previousMessages, message))\r\n    };\r\n\r\n    ws.onerror = (e) => {\r\n      //setConnection(false)\r\n      console.log('socket eroor', e.message);\r\n    };\r\n\r\n    ws.onclose = (e) => {\r\n      controller.nullify()\r\n      console.log('socket close', e.code, e.reason);\r\n    };\r\n\r\n    return function cleanup() {\r\n      ws.close(4000, \"left from chat\")\r\n      //controller.nullify()\r\n    };\r\n  }, [])\r\n\r\n\r\n  const onSend = useCallback((messages = []) => {\r\n    let controller = new WSController()\r\n    var ws = controller.ws;\r\n    //console.log(messages)\r\n    //if(ws.readyState == 1){\r\n      // var result = {access_token_cookie: token.accessToken,\r\n      //   refresh_token_cookie: token.refreshToken,\r\n      //   myId: ids.myId, roomId: ids.roomId, messages:messages[0]}\r\n      var result={ms_type: 2, messages: messages[0]}\r\n      if(ws.readyState == 1)\r\n        ws.send(JSON.stringify(result))\r\n      else console.log(\"bad state websocket\")\r\n      //console.log(JSON.stringify(messages[0]))\r\n      //ws.send(JSON.stringify(messages[0]))\r\n    //}else console.log(\"need reconection\")\r\n  }, [])\r\n\r\n\r\n  return (\r\n    <View style={styles.mainBox} contentContainerStyle={{flexDirection:'row', justifyContent: 'center'}}>\r\n      <ThemedCard style={styles.container}>\r\n        <GiftedChat\r\n          messages={messages}\r\n          onSend={messages => onSend(messages)}\r\n          locale='ru'\r\n          renderBubble={renderBubble}\r\n          renderSend={renderSend}\r\n          renderInputToolbar={renderInputToolbar} \r\n          inverted={false}\r\n          //renderActions={renderActions}\r\n          user={{\r\n            _id: ids.myId,//id влдельца\r\n          }}\r\n        />\r\n      </ThemedCard>\r\n    </View>\r\n\r\n  );\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainBox: {\r\n    flex:1,\r\n    backgroundColor: theme.colors.background,\r\n    flexDirection:'row', \r\n    justifyContent: 'center',\r\n  },\r\n  container: {\r\n    flex:1,\r\n    maxWidth: 700,\r\n    ...Platform.select({\r\n      android: {\r\n        margin: 0,\r\n        padding: 0,\r\n        backgroundColor: theme.colors.background,\r\n      },\r\n    }),\r\n  },\r\n})\r\n","import React from \"react\";\r\nimport { \r\n  View, Text, StyleSheet, Button, Platform, ScrollView, \r\n  Linking,  FlatList, SafeAreaView, StatusBar, \r\n} from \"react-native\";\r\n\r\nimport {\r\n  baseURL, theme\r\n} from '../constants'\r\n\r\nimport ThemedCard from \"../components/ThemedCard\"\r\n\r\nimport { getDocumentAsync } from \"expo-document-picker\"\r\nimport * as FileSystem from 'expo-file-system';\r\n\r\nclass ConverterActivity extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    var today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    this.state = {\r\n      files: [],\r\n      isLoading: false,\r\n      isConverted: false,\r\n      resultConverted: {},\r\n    }\r\n  }\r\n\r\n  bytesToSize(bytes) {\r\n    var sizes = ['Б', 'КБ', 'МБ', 'ГБ', 'ТБ'];\r\n    if (bytes == 0) return '0 Б';\r\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\r\n    return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\r\n  }\r\n\r\n  ChooseFile = async () => {\r\n    getDocumentAsync({\r\n      multiple: false,\r\n      copyToCacheDirectory: true,\r\n      type: \"*/*\" // all files\r\n    }).then((file) => {\r\n      if (file.type != \"success\")\r\n        return;\r\n\r\n      file.type = file.name.indexOf(\".\")<0? \"\": (/\\.([0-9a-z]+)(?:[\\?#]|$)/.exec(file.name)[0].toLocaleLowerCase());\r\n      file.extension = file.type.substring(1)\r\n\r\n      const DEFAULT_TYPES = \"pdf;\"\r\n      const IMAGE_TYPES = \"png;jpg;jpeg\"\r\n      const TEXT_TYPES = \"txt;c;h;cpp;cs;java;json;js;php;py;asm;sql;html;xml;yaml;md\"\r\n      const DOC_TYPES = \"xlsx;xlsm;xlsb;xlam;xltx;xltm;xls;xlt;xla;xlm;xlw;odc;ods;prn;csv;dsn;mdb;mde;accdb;accde;dbc;iqy;dqy;rqy;oqy;cub;atom;atomsvc;dbf;xll;xlb;slk;dif;xlk;bak;pptx;ppt;pptm;ppsx;pps;ppsm;potx;pot;potm;odp;thmx;docx;docm;doc;ppam;ppa;docx;docm;dotx;dotm;doc;odt;docx;docm;doc;dotx;dotm;dotx;dotm;rtf;odt;doc;wpd;doc\";\r\n\r\n      \r\n      var isAllowedType = false;\r\n\r\n      if(DEFAULT_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n\r\n      if(DOC_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n          \r\n      if(IMAGE_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n          \r\n      if(TEXT_TYPES.split(\";\").indexOf(file.extension)!=-1) {\r\n          isAllowedType = true;\r\n      }\r\n\r\n      if (!isAllowedType) {\r\n        alert(\"Неверное расширение документа\")\r\n        return;\r\n      }\r\n\r\n\r\n      if (Platform.OS == \"web\") {\r\n        this.setState({ isConverted: false, resultConverted: {} })\r\n        this.setState({ files: this.state.files.concat(file) })\r\n      } else {\r\n        var fileLoc = file.uri\r\n\r\n        FileSystem.readAsStringAsync(fileLoc, {encoding:\"base64\"})\r\n            .then(raw=>{\r\n              var uriFile = \"data:application/vnd.custom-type;base64,\" + raw\r\n                \r\n              file.uri = uriFile\r\n\r\n              this.setState({ isConverted: false, resultConverted: {} })\r\n              this.setState({ files: this.state.files.concat(file) })\r\n            })\r\n            .catch(e=>console.log(\"wtf error\"))\r\n      }\r\n    }).catch((err) => {\r\n      console.error(\"Ошибка\", err);\r\n    })\r\n  }\r\n\r\n  Convert = async () => {\r\n    if (this.state.files.length == 0)\r\n      return\r\n\r\n    this.setState({ isLoading: true })\r\n    this.setState({ isConverted: false })\r\n    this.setState({ resultConverted: {} })\r\n\r\n    var data = JSON.stringify({data:this.state.files})\r\n    \r\n    try {\r\n      let response = await fetch(baseURL + \"/upload\", {\r\n        mode: \"cors\",\r\n        method: 'POST',\r\n        headers: {\r\n          \"Content-Type\": 'application/vnd.custom-type'\r\n        },\r\n        body: data,\r\n      });\r\n\r\n      console.log(\"response\", response)\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json());\r\n\r\n        this.setState({ isConverted: true })\r\n        this.setState({ resultConverted: result.data })\r\n      }\r\n      else if (response.status == 401) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n        alert(result.message)\r\n      }\r\n      this.setState({ isLoading: false })\r\n    } catch (err) {\r\n      console.log('Ошибка', err);\r\n      alert(\"Возникла ошибка при обработке!\")\r\n      this.setState({ isConverted: false })\r\n      this.setState({ resultConverted: {} })\r\n      this.setState({ isLoading: false })\r\n    }\r\n  }\r\n\r\n  DownloadFile = async () => {\r\n    const { resultConverted } = this.state;\r\n    var url = resultConverted.path\r\n    console.log(resultConverted)\r\n\r\n    await Linking.openURL(url);\r\n  }\r\n\r\n  ItemMoveUp = async (key) => {\r\n    if(key <= 0)\r\n      return;\r\n        \r\n    var newFiles = this.state.files\r\n\r\n    var bufFile = newFiles[key];\r\n    newFiles[key] = newFiles[key - 1];\r\n    newFiles[key - 1] = bufFile\r\n\r\n    this.setState({ files: newFiles })\r\n    this.setState({ isConverted: false, resultConverted: {} })\r\n  }\r\n\r\n  ItemMoveDown = async (key) => {\r\n    if(key >= this.state.files.length-1)\r\n      return;\r\n        \r\n    var newFiles = this.state.files\r\n\r\n    var bufFile = newFiles[key];\r\n    newFiles[key] = newFiles[key + 1];\r\n    newFiles[key + 1] = bufFile\r\n\r\n    this.setState({ files: newFiles })\r\n    this.setState({ isConverted: false, resultConverted: {} })\r\n  }\r\n\r\n  ItemDelete = async (key) => {\r\n    var newFiles = this.state.files.filter((_, i)=>i != key)\r\n\r\n    this.setState({ isConverted: false, resultConverted: {} })\r\n    this.setState({ files: newFiles })\r\n  }\r\n\r\n  render() {\r\n    const { navigation } = this.props;\r\n    const { resultConverted } = this.state;\r\n\r\n\r\n    let inputBox = \r\n      <ThemedCard>\r\n        <View style={styles.inputBox}>\r\n          <Text style={styles.headerText}>Преобразовать в PDF</Text>\r\n          <Text style={styles.disclaimer}>Мы не несём ответственности за конфиденциальность отправляемых файлов.</Text>\r\n          <View style={styles.selectFileBox}>\r\n            <Button\r\n              color={theme.colors.accent}\r\n              title=\"Выбрать файл\"\r\n              disabled = {!this.state.isLoading?false:true}\r\n              onPress={() => this.ChooseFile()}\r\n            />\r\n          </View>\r\n        </View>\r\n      </ThemedCard>\r\n\r\n    let filesListView =\r\n      this.state.files.map((prop, key) => {\r\n        return (\r\n        <View style={styles.listview} key={key}>\r\n          <View style={{ flex: 1 }}><Text style={styles.listItemHeader}>{key + 1}. {prop.name} ({this.bytesToSize(prop.size)})</Text></View>\r\n          <View style={styles.listItemButton}><Button disabled = {!this.state.isLoading?false:true} title=\"▲\" onPress={() => this.ItemMoveUp(key)}/></View>\r\n          <View style={styles.listItemButton}><Button disabled = {!this.state.isLoading?false:true} title=\"▼\" onPress={() => this.ItemMoveDown(key)}/></View>\r\n          <View style={styles.listItemButton}><Button disabled = {!this.state.isLoading?false:true} title=\"⛌\" onPress={() => this.ItemDelete(key)} color=\"#dc3545\"/></View>\r\n        </View>);\r\n      })\r\n    \r\n    let fileListBox = this.state.files.length == 0 ? <View /> :\r\n      <ThemedCard>\r\n        <View style={styles.listviewBox}>\r\n          <Text style={styles.headerText}>Список файлов</Text>\r\n          {filesListView}\r\n          <View style={styles.convertFileBox}>\r\n            <Button\r\n              color=\"#c93757\"\r\n              disabled = {!this.state.isLoading?false:true}\r\n              title = {!this.state.isLoading?\"Конвертировать\":\"Конвертируем...\"}\r\n              onPress={() => this.Convert()}\r\n            />\r\n          </View>\r\n        </View>\r\n      </ThemedCard>\r\n    \r\n    let outputBox = !this.state.isConverted ? <View /> :\r\n      <ThemedCard>\r\n        <Text style={styles.headerText}>Результат</Text>\r\n\r\n        <View style={styles.listview}>\r\n          <View style={{ flex: 1 }}><Text style={styles.listItemHeader}>{resultConverted.name} ({this.bytesToSize(resultConverted.size)})</Text></View>\r\n        </View>\r\n        <View style={styles.downloadFileBox}>\r\n          <Button\r\n            color={theme.colors.accent}\r\n            title=\"Скачать\"\r\n            onPress={() => this.DownloadFile(resultConverted.path)}\r\n          />\r\n        </View>\r\n      </ThemedCard>\r\n    \r\n\r\n    return (\r\n      <ScrollView style={styles.mainScroll} contentContainerStyle={{flexDirection:'row', justifyContent: 'center'}}>\r\n        <View style={styles.container}>\r\n          {inputBox}\r\n          {fileListBox}\r\n          {outputBox}\r\n        </View>\r\n      </ScrollView>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScroll: {\r\n    backgroundColor: theme.colors.background,\r\n  },\r\n  container: {\r\n    paddingBottom:16,\r\n    maxWidth:700,\r\n    flex: 1,\r\n  },\r\n  inputBox: {\r\n    flexDirection: 'column', \r\n    alignItems: \"center\",\r\n  },\r\n  headerText: {\r\n    fontSize: 27,\r\n    color: theme.colors.text,\r\n    textAlign: \"center\",\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n  },\r\n  disclaimer: {\r\n    fontSize: 11,\r\n    textAlign: 'center',\r\n    marginBottom: 10,\r\n    color: theme.colors.text2,\r\n  },\r\n  selectFileBox: {\r\n    alignItems: \"center\",\r\n    flexDirection: 'row',\r\n  },\r\n  listviewBox: {\r\n    flexDirection: 'column',\r\n  },\r\n  listview: {\r\n    backgroundColor: theme.colors.background,\r\n    borderRadius: 4,\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    margin: 4,\r\n    flex: 1,\r\n  },\r\n  listItemHeader: {\r\n    color: theme.colors.text2,\r\n    margin: 10,\r\n    ...Platform.select({\r\n      android: {\r\n        fontSize: 12,\r\n      },\r\n      default: {\r\n        fontSize: 15,\r\n      }\r\n    }),\r\n  },\r\n  listItemButton: {\r\n    ...Platform.select({\r\n      android: {\r\n        marginLeft: 6,\r\n      },\r\n      default: {\r\n        marginLeft: 8,\r\n      }\r\n    }),\r\n  },\r\n  convertFileBox: {\r\n    alignSelf: \"center\",\r\n    flexDirection: 'row',\r\n    marginTop: 10\r\n  },\r\n  downloadFileBox: {\r\n    justifyContent: \"center\",\r\n    alignSelf: \"center\",\r\n    marginTop: 10\r\n  },\r\n});\r\n\r\nexport default ConverterActivity;\r\n","import React from 'react';\r\nimport {\r\n  TouchableHighlight,\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Platform\r\n\r\n} from 'react-native';\r\nimport ThemedCard from \"../../components/ThemedCard\";\r\n\r\nimport{marginComponent,\r\n   paddingComponent,\r\n    mainColor,\r\n    borderRadius,\r\n    borderWidth,\r\n    borderColor,\r\n    backgroundColor,\r\n    componentFontSize,\r\n    componentTitleSize,\r\n    textExtraColor,\r\n    textColor,\r\n    elevation,\r\n    boxShadow,\r\n    theme\r\n} from '../../constants'\r\n\r\n\r\nconst Discipline = props => {\r\n  const { textStyle, viewStyle, titleStyle,positionStyle}=styles;\r\n  if(props.isStudent)\r\n      return (\r\n        <TouchableHighlight onPress={() => {props.onPress(props.discipline) }} underlayColor={backgroundColor}>\r\n          <ThemedCard>\r\n          {/* <View style={viewStyle}> */}\r\n            <Text style={positionStyle}>{props.discipline.POSITION}</Text>\r\n            <Text style={titleStyle}>{props.discipline.DISCIPLINE_NAME}</Text>\r\n            <Text style={textStyle}>{props.discipline.START_TIME} - {props.discipline.END_TIME}</Text>\r\n            {\r\n              props.discipline.FIO_TEACHER1?\r\n                <Text style={textStyle}>{props.discipline.FIO_TEACHER1}{props.discipline.FIO_TEACHER2? ', '+props.discipline.FIO_TEACHER2:null}</Text>\r\n                : null\r\n            }\r\n            \r\n            {props.discipline.WEEK? <Text style={textStyle}>на неделях: {props.discipline.WEEK}</Text> : null}\r\n            <Text style={textStyle}>{props.discipline.SYM_ROOM}</Text>\r\n          {/* </View> */}\r\n          </ThemedCard>\r\n        </TouchableHighlight>);\r\n  \r\n  else\r\n      return (\r\n        <TouchableHighlight onPress={() => {props.onPress(props.discipline) }} underlayColor={backgroundColor}>\r\n          <ThemedCard>\r\n          {/* <View style={viewStyle}> */}\r\n            <Text style={positionStyle}>{props.discipline.POSITION}</Text>\r\n            <Text style={titleStyle}>{props.discipline.DISCIPLINE_NAME}</Text>\r\n            <Text style={textStyle}>{props.discipline.START_TIME} - {props.discipline.END_TIME}</Text>\r\n            {\r\n              props.discipline.STUDY_GROUP?\r\n                <Text style={textStyle}>{props.discipline.STUDY_GROUP}</Text>\r\n                : null\r\n            }\r\n            \r\n            {props.discipline.WEEK? <Text style={textStyle}>на неделях: {props.discipline.WEEK}</Text> : null}\r\n            <Text style={textStyle}>{props.discipline.SYM_ROOM}</Text>\r\n          {/* </View> */}\r\n          </ThemedCard>\r\n        </TouchableHighlight>);\r\n  \r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  textStyle :\r\n  {\r\n    fontSize: componentFontSize,\r\n    color: theme.colors.text2\r\n  },\r\n  positionStyle:\r\n  {\r\n    fontSize: componentTitleSize,\r\n    fontWeight: 'bold',\r\n    color: theme.colors.text\r\n  },\r\n  titleStyle :\r\n  {\r\n    fontSize: componentTitleSize,\r\n    color: theme.colors.text\r\n  },\r\n  viewStyle:{\r\n    backgroundColor : theme.colors.card,\r\n    borderRadius: borderRadius,\r\n    margin: marginComponent,\r\n    padding: paddingComponent,\r\n    ...Platform.select({\r\n      android: {\r\n          elevation: elevation\r\n      },\r\n      default: {\r\n        boxShadow: boxShadow\r\n      }\r\n    })\r\n  },\r\n});\r\n\r\nexport { Discipline }","import React from 'react';\r\nimport {\r\n  View,\r\n  Image,\r\n  Text,\r\n  StyleSheet,\r\n  Linking,\r\n  Platform\r\n} from 'react-native';\r\n\r\nimport{marginComponent,\r\n   paddingComponent,\r\n    mainColor,\r\n    borderRadius,\r\n    borderWidth,\r\n    borderColor,\r\n    componentFontSize,\r\n    componentTitleSize,\r\n    textExtraColor,\r\n    textColor,\r\n    elevation,\r\n    boxShadow,\r\n    DEFAULT_TEACHER_PORTRAIT,\r\n    theme,\r\n} from '../../constants'\r\n\r\nimport ThemedCard from \"../../components/ThemedCard\";\r\n\r\nconst DisciplineInfo = props => {\r\n  const { textStyle, viewStyle, titleStyle, underline} = styles;\r\n  const { NAME, SURNAME, PATRONYMIC, CABINET, MAIN_SUBDIVISION, EMAIL, SITE_LINK, PORTRAIT_URL } = props.teacher;\r\n  \r\n  if(Platform.OS===\"web\")\r\n      return (\r\n        NAME?\r\n          // <View style = {[viewStyle,styles.mainBox]}>\r\n          <ThemedCard>\r\n            <View style={styles.mainBox}>\r\n              <Image\r\n                style={styles.img}\r\n                source={PORTRAIT_URL ? PORTRAIT_URL : DEFAULT_TEACHER_PORTRAIT} />\r\n              <View style={styles.profile_fields_box}>\r\n                <Text style={[titleStyle, underline]} onPress={() => Linking.openURL(SITE_LINK)}>{SURNAME} {NAME} {PATRONYMIC}</Text>\r\n                <Text style={textStyle}>Кафедра {MAIN_SUBDIVISION} {CABINET}</Text>\r\n                <Text style={[textStyle, underline]} selectable={true}>{EMAIL}</Text>\r\n              </View>\r\n            </View>\r\n          </ThemedCard>\r\n        : null\r\n      )\r\n  else\r\n      return (\r\n        NAME?\r\n        //<View style = {viewStyle}>\r\n        <ThemedCard>\r\n          <Text style={[titleStyle,underline]} onPress={() => Linking.openURL(SITE_LINK)}>{SURNAME} {NAME} {PATRONYMIC}</Text>\r\n          <Text style={textStyle}>Кафедра {MAIN_SUBDIVISION} {CABINET}</Text>\r\n          <Text style={[textStyle,underline]} selectable ={true}>{EMAIL}</Text>\r\n         </ThemedCard>\r\n        // </View>\r\n        : null\r\n      )\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    textStyle :\r\n    {\r\n      fontSize: componentFontSize,\r\n      color: theme.colors.text2,\r\n      flexShrink:1,\r\n    },\r\n    profile_fields_box: {\r\n      flexDirection: 'column',\r\n      flexShrink:1,\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      maxWidth:700,\r\n    },\r\n    img: {\r\n      width: 100,\r\n      height: 100,\r\n      borderRadius: 50,\r\n      marginRight: 12,\r\n      alignItems: \"center\"\r\n    },\r\n    titleStyle :\r\n    {\r\n      fontSize: componentTitleSize,\r\n      color: theme.colors.text,\r\n      flexShrink:1,\r\n    },\r\n    viewStyle:{\r\n      borderRadius: borderRadius,\r\n      margin: marginComponent,\r\n      padding: paddingComponent,\r\n      backgroundColor: theme.colors.card,\r\n      ...Platform.select({\r\n        android: {\r\n            elevation: elevation\r\n        },\r\n        default: {\r\n          boxShadow: boxShadow\r\n        }\r\n      })\r\n    },\r\n    underline:{\r\n      textDecorationLine: 'underline'\r\n    },    \r\n    mainBox:{\r\n      flexDirection: \"row\",\r\n    },\r\n    infoBox:{\r\n      flexDirection: \"column\",\r\n    },\r\n  });\r\n  \r\n  export { DisciplineInfo }","import React from 'react';\r\nimport {\r\nTouchableHighlight,\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Platform\r\n} from 'react-native';\r\nimport ThemedCard from \"../../components/ThemedCard\";\r\n\r\nimport{marginComponent,\r\n   paddingComponent,\r\n    mainColor,\r\n    borderRadius,\r\n    borderWidth,\r\n    borderColor,\r\n    componentFontSize,\r\n    componentTitleSize,\r\n    textExtraColor,\r\n    textColor,\r\n    elevation,\r\n    backgroundColor,\r\n    boxShadow,\r\n    theme\r\n} from '../../constants'\r\n\r\n\r\nconst ActionItem = props=>{\r\n    const {reViewStyle, text} = props;\r\n    const {viewStyle, titleStyle} = styles;\r\n    return(\r\n    <TouchableHighlight onPress={() => {props.onPress() } } underlayColor={backgroundColor}>\r\n      <ThemedCard>\r\n      {/* <View style={[viewStyle, reViewStyle]}> */}\r\n      <Text style={titleStyle} >{text}</Text>\r\n    {/* </View> */}\r\n    </ThemedCard>\r\n  </TouchableHighlight>)\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    titleStyle :\r\n    {\r\n      fontSize: componentTitleSize,\r\n      color: theme.colors.text,\r\n      textAlign: 'center'\r\n    },\r\n    viewStyle:{\r\n      borderRadius: borderRadius,\r\n      margin: marginComponent,\r\n      padding: paddingComponent,\r\n      backgroundColor: theme.colors.card,\r\n      ...Platform.select({\r\n        android: {\r\n            elevation: elevation\r\n        },\r\n        default: {\r\n          boxShadow: boxShadow\r\n        }\r\n      })\r\n    },\r\n  });\r\n  \r\n  export { ActionItem }","import React from 'react';\r\nimport {\r\n  TouchableHighlight,\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Platform\r\n} from 'react-native';\r\n\r\nimport{w,h,\r\n    marginComponent,\r\n    paddingComponent,\r\n    mainColor,\r\n    borderRadius,\r\n    borderWidth,\r\n    borderColor,\r\n    textColor,\r\n    backgroundColor,\r\n    elevation,\r\n    boxShadow,\r\n    theme\r\n    } from '../../constants'\r\n\r\n\r\n    const DayIcon = props =>\r\n    {\r\n        const {date, isChosen} = props;\r\n        var today= new Date();\r\n        today.setHours(0,0,0,0);\r\n        var flag = 0;\r\n        if((date.getDate() == today.getDate()) &&  (date.getMonth() == today.getMonth())) flag = 1; \r\n        var dayName;\r\n        switch (date.getDay()) {\r\n            case 1:\r\n                {\r\n                    dayName = 'Пн'\r\n                    break;\r\n                }\r\n            case 2:\r\n                {\r\n                    dayName = 'Вт'\r\n                    break;\r\n                }\r\n            case 3:\r\n                {\r\n                    dayName = 'Ср'\r\n                    break;\r\n                }\r\n            case 4:\r\n                {\r\n                    dayName = 'Чт'\r\n                    break;\r\n                }\r\n            case 5:\r\n                {\r\n                    dayName = 'Пт'\r\n                    break;\r\n                }\r\n            case 6:\r\n                {\r\n                    dayName = 'Сб'\r\n                    break;\r\n                }\r\n        }\r\n        const { viewStyle, chosenStyle,textStyle } = styles;\r\n        return (\r\n            isChosen ?\r\n                (<TouchableHighlight underlayColor={backgroundColor}>\r\n                    <View style={[viewStyle, chosenStyle]}>\r\n                        <Text style={textStyle}>{dayName}</Text>\r\n                        <Text style={textStyle}>{date.getDate()}</Text>\r\n                    </View>\r\n                </TouchableHighlight>)\r\n                :\r\n                (<TouchableHighlight onPress={() => {props.onPress(date)}} underlayColor={backgroundColor}>\r\n                    <View style={flag? [viewStyle,{borderWidth:borderWidth, borderColor: theme.colors.accent}] :[viewStyle,{borderWidth:borderWidth, borderColor: \"#00000000\"}]}>\r\n                        <Text style={textStyle}>{dayName}</Text>\r\n                        <Text style={textStyle}>{date.getDate()}</Text>\r\n                    </View>\r\n                </TouchableHighlight>)\r\n                        \r\n        );\r\n    };\r\n\r\n    const styles = StyleSheet.create({\r\n        viewStyle:\r\n        {\r\n            width: (w-12*marginComponent)/6,\r\n            margin: marginComponent,\r\n            borderRadius: borderRadius,\r\n            alignItems: 'center',\r\n            padding:(w-12*marginComponent)/6>=38? paddingComponent : 2,\r\n            backgroundColor: theme.colors.text2,\r\n            ...Platform.select({\r\n                android: {\r\n                    elevation: elevation\r\n                },\r\n                default: {\r\n                    boxShadow: boxShadow\r\n                }\r\n              })\r\n        },\r\n        chosenStyle:\r\n        {\r\n            backgroundColor: theme.colors.accent\r\n        },\r\n        textStyle:\r\n        {\r\n            color:textColor\r\n        }\r\n    });\r\n//,\r\n    export { DayIcon }","import React, { Component } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  ScrollView,\r\n  StyleSheet\r\n} from 'react-native';\r\n\r\n\r\nimport { Calendar, LocaleConfig } from 'react-native-calendars'\r\n\r\nimport {\r\n  DayIcon,\r\n  Discipline,\r\n  DisciplineInfo,\r\n  ActionItem,\r\n} from './components/index'\r\n\r\nimport {\r\n  h, w,\r\n  paddingBottomScroll,\r\n  marginComponent,\r\n  paddingComponent,\r\n  componentTitleSize,\r\n  textColor,\r\n  backgroundColor,\r\n  baseURL,\r\n  borderRadius,\r\n  boxShadow,\r\n  domainURL,\r\n  theme\r\n} from '../constants'\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Returns the ISO week of the date.\r\nDate.prototype.getWeek = function () {\r\n  var date = new Date(this.getTime());\r\n  date.setHours(0, 0, 0, 0);\r\n  date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);\r\n  var week1 = new Date(date.getFullYear(), 0, 4);\r\n  return 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000\r\n    - 3 + (week1.getDay() + 6) % 7) / 7);\r\n}\r\n\r\nDate.prototype.getMonthName = function () {\r\n  var date = new Date(this.getTime());\r\n  var months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];\r\n  return months[date.getMonth()];\r\n}\r\n\r\nLocaleConfig.locales['ru'] = {\r\n  monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Августь', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],\r\n  monthNamesShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],\r\n  dayNames: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],\r\n  dayNamesShort: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Суб'],\r\n  today: 'Сегодня\\'Сг'\r\n};\r\nLocaleConfig.defaultLocale = 'ru';\r\n\r\nclass ScheduleActivity extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    var today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    this.state = {\r\n      weekNum: -1,\r\n      //все дисциплины\r\n      disArr: [],\r\n      //дисциплины текущего дня\r\n      currentdisArr: [],\r\n      currentDay: today,\r\n      isExtended: false,\r\n      teachersArr: [],\r\n\r\n      START_TIME: null,\r\n      DAY_DATE: null,\r\n      STUDY_GROUP:null,\r\n\r\n      accessToken: null,\r\n      refreshToken: null,\r\n      isStudent: null,\r\n      ID: null,\r\n      NAME: null,\r\n      SURNAME: null,\r\n      PATRONYMIC: null,\r\n\r\n      SYM_GROUP: null,\r\n      SYM_FACULTET: null,\r\n      ID_PLAN: null,\r\n      YEAR_ADMISSION: null,\r\n      ID_SPECIALIZATION: null,\r\n      ID_FACULTET: null,\r\n      ID_GROUP: null,\r\n\r\n      FIO: null,\r\n      DEGREE: null,\r\n      POST: null,\r\n      MAIN_SUBDIVISION: null,\r\n      CABINET: null,\r\n      EMAIL: null,\r\n      SITE_LINK: null,\r\n      PORTRAIT_URL: null,\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // выбирает из списка дисциплин те, что нужны на текущий день текущей недели\r\n  findCurrentDisciplines(disArr, newDate, newWeekNum) {\r\n    if (arguments.length == 1) {\r\n      const { currentDay, weekNum } = this.state;\r\n\r\n      const frequency = Number.isInteger(weekNum / 2) ? 1 : 2;\r\n      let currentdisArr = disArr.filter(item => {\r\n        if (this.state.isStudent) {\r\n          if (currentDay.getDay() === item.DAY_NUMBER && (item.FREQUENCY >= 3 || frequency === item.FREQUENCY)) {\r\n            return true;\r\n          }\r\n        } else {\r\n          var local_date = new Date(item.DAY_DATE)\r\n          item.FREQUENCY = 1\r\n          item.DAY_NUMBER = local_date.getDay()\r\n          if (currentDay.toDateString() == local_date.toDateString()) {\r\n            return true;\r\n          }\r\n        }\r\n      });\r\n      if (weekNum < 0 || weekNum > 18) return [];\r\n      else return currentdisArr.sort((a, b) => { return a.POSITION - b.POSITION });\r\n    } else {\r\n      const frequency = Number.isInteger(newWeekNum / 2) ? 1 : 2;\r\n      let currentdisArr = disArr.filter(item => {\r\n        if (this.state.isStudent) {\r\n          if (newDate.getDay() === item.DAY_NUMBER && (item.FREQUENCY >= 3 || frequency === item.FREQUENCY)) {\r\n            return true;\r\n          }\r\n        } else {\r\n          var local_date = new Date(item.DAY_DATE)\r\n          item.FREQUENCY = 1\r\n          item.DAY_NUMBER = local_date.getDay()\r\n          if (newDate.toDateString() == local_date.toDateString()) {\r\n            return true;\r\n          }\r\n        }\r\n\r\n      });\r\n      if (newWeekNum < 0 || newWeekNum > 18) return [];\r\n      else return currentdisArr.sort((a, b) => { return a.POSITION - b.POSITION });\r\n    }\r\n\r\n  }\r\n\r\n\r\n  updateDay = async (newDate) => {\r\n    const { disArr, currentDay, weekNum } = this.state;\r\n    //расчет текущей недели\r\n    let weekOffset = (newDate.getWeek() - currentDay.getWeek());\r\n    let newWeekNum = weekNum + weekOffset;\r\n    const currentdisArr = await this.findCurrentDisciplines(disArr, newDate, newWeekNum);\r\n    this.setState({ currentdisArr: currentdisArr, currentDay: newDate, weekNum: newWeekNum, isExtended: false });\r\n  }\r\n\r\n  makeIdsArray(discipline) {\r\n    var ids = [];\r\n    if (discipline.ID_TEACHER1) ids.push(parseInt(discipline.ID_TEACHER1));\r\n    if (discipline.ID_TEACHER2) ids.push(parseInt(discipline.ID_TEACHER2));\r\n    if (discipline.ID_TEACHER3) ids.push(parseInt(discipline.ID_TEACHER3));\r\n    if (discipline.ID_TEACHER4) ids.push(parseInt(discipline.ID_TEACHER4));\r\n    return ids;\r\n  }\r\n\r\n  chooseDisciplineTeacher = (item) => {\r\n    this.setState({\r\n      isExtended: true,\r\n      START_TIME: item.START_TIME,\r\n      DAY_DATE: item.DAY_DATE,\r\n      STUDY_GROUP: item.STUDY_GROUP\r\n    })\r\n  }\r\n\r\n  chooseDiscipline = async (discipline) => {\r\n    const ids = this.makeIdsArray(discipline);\r\n    if (ids.length == 0)\r\n      return;\r\n\r\n    var teachers = [];\r\n    try {\r\n      for (const id of ids) {\r\n        try {\r\n          const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken, id: id }\r\n\r\n          let response = await fetch(baseURL + \"/get_teacher_info\", {\r\n            mode: \"cors\",\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            }\r\n          })\r\n\r\n\r\n          if (response.status == 200) {\r\n            let teacher = (await response.json()).json;\r\n\r\n            teachers.push(teacher[0]);\r\n          }\r\n          else if (response.status == 400) {\r\n            this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n          }\r\n          else {\r\n            let result = await response.json()\r\n            console.log(result.message)\r\n          }\r\n        } catch (e) {\r\n          console.log(\"catch chooseDiscipline: \", e.message)\r\n        }\r\n\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n    this.setState({ isExtended: true, teachersArr: teachers })\r\n  }\r\n\r\n  cancelDiscepline = async () => {\r\n    this.setState({ teachersArr: [], isExtended: false });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.startWithToken()\r\n  }\r\n\r\n\r\n  startWithToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      const is_student = user_profile.is_student\r\n\r\n      this.setState({ accessToken: access_token, refreshToken: refresh_token, isStudent: is_student })\r\n\r\n      this.loadWeekNumber()\r\n    } catch (e) {\r\n      console.log(\"catched startWithToken\", e.message)\r\n      this.props.appFunctions.redirect({ accessToken: null, refreshToken: null, isStudent: null })\r\n    }\r\n  }\r\n\r\n  loadStudentData = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken }\r\n\r\n      let response = await fetch(baseURL + \"/get_student_info\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json[0];\r\n\r\n        var info = {\r\n          ID: result.ID,\r\n          SYM_GROUP: result.SYM_GROUP,\r\n          SYM_FACULTET: result.SYM_FACULTET,\r\n          NAME: result.NAME,\r\n          SURNAME: result.SURNAME,\r\n          PATRONYMIC: result.PATRONYMIC,\r\n          ID_PLAN: result.ID_PLAN,\r\n          YEAR_ADMISSION: result.YEAR_ADMISSION,\r\n          ID_SPECIALIZATION: result.ID_SPECIALIZATION,\r\n          ID_FACULTET: result.ID_FACULTET,\r\n          ID_GROUP: result.ID_GROUP\r\n        }\r\n        this.setState(info)\r\n        this.loadScheduleStudent()\r\n      }\r\n      else if (response.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserData: \", e.message)\r\n    }\r\n  }\r\n\r\n  loadTeacherID = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken }\r\n\r\n      let responseId = await fetch(baseURL + \"/get_teacher_id\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (responseId.status == 200) {\r\n        let resultId = (await responseId.json()).json[0];\r\n\r\n        var info = {\r\n          ID: resultId.ID_PERSON\r\n        }\r\n\r\n        this.setState(info)\r\n        this.loadTeacherData()\r\n      }\r\n      else if (responseId.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await responseId.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadTeacherID: \", e.message)\r\n    }\r\n  }\r\n\r\n  loadTeacherData = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken, id: this.state.ID }\r\n\r\n      let response = await fetch(baseURL + \"/get_teacher_info\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json[0];\r\n\r\n        var info = {\r\n          ID: result.ID,\r\n          NAME: result.NAME,\r\n          SURNAME: result.SURNAME,\r\n          PATRONYMIC: result.PATRONYMIC,\r\n          FIO: result.FIO,\r\n          DEGREE: result.DEGREE,\r\n          POST: result.POST,\r\n          MAIN_SUBDIVISION: result.MAIN_SUBDIVISION,\r\n          CABINET: result.CABINET,\r\n          EMAIL: result.EMAIL,\r\n          SITE_LINK: result.SITE_LINK,\r\n          PORTRAIT_URL: result.PORTRAIT_URL,\r\n        }\r\n        this.setState(info)\r\n        this.loadScheduleTeacher()\r\n      }\r\n      else if (response.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserData: \", e.message)\r\n    }\r\n  }\r\n\r\n  loadScheduleStudent = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken, id: this.state.ID_GROUP }\r\n\r\n      if (data.id == null)\r\n        return;\r\n\r\n      let response = await fetch(baseURL + \"/student_schedule\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json;\r\n\r\n        const disArr = result\r\n        const currentdisArr = await this.findCurrentDisciplines(disArr);\r\n\r\n        this.setState({ disArr, currentdisArr });\r\n      }\r\n      else if (response.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadScheduleStudent: \", e.message)\r\n    }\r\n  }\r\n\r\n  loadScheduleTeacher = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken, id: this.state.ID }\r\n\r\n      if (data.id == null)\r\n        return;\r\n\r\n      let response = await fetch(baseURL + \"/teacher_schedule\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json;\r\n\r\n        const disArr = result\r\n        const currentdisArr = await this.findCurrentDisciplines(disArr);\r\n\r\n        this.setState({ disArr: disArr, currentdisArr: currentdisArr });\r\n      }\r\n      else if (response.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadScheduleTeacher: \", e.message)\r\n    }\r\n  }\r\n\r\n  loadWeekNumber = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken }\r\n\r\n      let response = await fetch(baseURL + \"/week_num\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json[0];\r\n\r\n        this.setState({ weekNum: result.WEEK });\r\n\r\n\r\n        if (this.state.isStudent)\r\n          this.loadStudentData()\r\n        else\r\n          this.loadTeacherID()\r\n      }\r\n      else if (response.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadWeekNumber: \", e.message)\r\n    }\r\n  }\r\n\r\n  createChat = async (id) => {\r\n    //this.props.navigation.navigate('ChatRooms')\r\n    try {\r\n      const data = {\r\n        access_token_cookie: this.state.accessToken,\r\n        refresh_token_cookie: this.state.refreshToken, id: id\r\n      }\r\n\r\n      let response = await fetch(baseURL + \"/chat/create_chat\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json[0];\r\n        this.props.navigation.navigate('Chat', { room_id: result.room_id, my_id: result.my_id })\r\n        //this.props.navigation.navigate('ChatRooms')\r\n      }\r\n      else if (response.status == 400) {\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch createChat: \", e.message)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { disArr, currentdisArr, currentDay, weekNum, isExtended, teachersArr, isStudent } = this.state;\r\n    const { description, textTitleStyle, center, calendar } = styles;\r\n\r\n    //вычисление дат для dayIcon\r\n    var DayIconArr = [];\r\n    var mondayDate = new Date(currentDay);\r\n    if (currentDay.getDay() == 0) {\r\n      mondayDate.setDate(currentDay.getDate() - 6);\r\n    } else {\r\n      mondayDate.setDate(currentDay.getDate() - currentDay.getDay() + 1);\r\n    }\r\n    for (let index = 0; index < 6; index++) {\r\n      let dateInWeek = new Date(mondayDate);\r\n      dateInWeek.setDate(mondayDate.getDate() + index);\r\n      DayIconArr.push(dateInWeek);\r\n    }\r\n    // console.log(\"is students schedule?\", isStudent)\r\n\r\n    // var nextMondayDate = new Date(mondayDate);\r\n    // nextMondayDate.setDate(mondayDate.getDate()+7);\r\n\r\n    var extraBox =\r\n      <View style={{flex: 1, minWidth: 300}}>\r\n        {isExtended ?\r\n          (isStudent ?\r\n            <View>\r\n              <Text style={[center, textTitleStyle, {marginTop: 8}]}>ПРЕПОДАВАТЕЛИ</Text>\r\n              {teachersArr.map((item, index) =>\r\n                <View key={item.ID} style={{marginTop: 8}}>\r\n                  <DisciplineInfo teacher={item} />\r\n                  <ActionItem text={'ЧАТ'} onPress={() => this.createChat(item.ID)}/>\r\n                </View>\r\n              )}\r\n              <ActionItem text={'НАЗАД'} onPress={this.cancelDiscepline} />\r\n            </View> :\r\n            <View style={{ alignItems: 'center' }}>\r\n              <ActionItem text={'СОЗДАТЬ ЗАДАНИЕ'}\r\n                onPress={() => this.props.navigation.navigate('AddTask',\r\n                  { date: this.state.DAY_DATE, time: this.state.START_TIME, group: encodeURIComponent(this.state.STUDY_GROUP) })} />\r\n              <ActionItem text={'НАЗАД'} onPress={this.cancelDiscepline} />\r\n            </View>\r\n          ) :\r\n          <View>\r\n            {\r\n              currentdisArr.length == 0 ?\r\n                <Text style={[center, textTitleStyle, {marginTop: 8}]}>НЕТ ЗАНЯТИЙ</Text>\r\n                :\r\n                currentdisArr.map((item, index) =>\r\n                  <Discipline discipline={item} isStudent={this.state.isStudent}\r\n                    onPress={this.state.isStudent ? this.chooseDiscipline : () => this.chooseDisciplineTeacher(item)} key={index} />\r\n                )\r\n            }\r\n          </View>}\r\n      </View>\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n      <ScrollView style={styles.mainScroll} contentContainerStyle={{ flexDirection: 'row', justifyContent: 'center' }}>\r\n        <View style={styles.container}>\r\n          {/* описание */}\r\n          <View style={description}>\r\n            <Text style={textTitleStyle}>Выбрано: {currentDay.getDate()} {currentDay.getMonthName()}{(weekNum < 0 || weekNum > 18) ? null : ', ' + weekNum + ' неделя'} </Text>\r\n          </View>\r\n          <View style={{\r\n            flexDirection: \"row\", flexWrap: 'wrap',\r\n            alignItems: 'flex-start', justifyContent: 'center',\r\n          }}>\r\n            <View>\r\n              <Calendar\r\n                style={calendar}\r\n                onDayPress={(newdate) => { this.updateDay(new Date(newdate.year, newdate.month - 1, newdate.day)) }}\r\n                current={this.state.currentDay}\r\n                renderArrow={(direction) => <Text style={{ color: theme.colors.accent }}>{direction == 'left' ? '<' : '>'}</Text>}\r\n                firstDay={1}\r\n                theme={{\r\n                  backgroundColor: theme.colors.card,\r\n                  calendarBackground: theme.colors.card,\r\n                  textSectionTitleColor: theme.colors.text2,\r\n                  textSectionTitleDisabledColor: theme.colors.text2,\r\n                  selectedDayBackgroundColor: theme.colors.accent,\r\n                  selectedDayTextColor: theme.colors.text,\r\n                  todayTextColor: theme.colors.accent,\r\n                  dayTextColor: theme.colors.text,\r\n                  textDisabledColor: theme.colors.text2,\r\n                  dotColor: '#00adf5',\r\n                  selectedDotColor: '#ffffff',\r\n                  arrowColor: theme.colors.accent,\r\n                  disabledArrowColor: '#d9e1e8',\r\n                  monthTextColor: theme.colors.accent,\r\n                  indicatorColor: theme.colors.accent,\r\n                  textDayFontFamily: 'monospace',\r\n                  textMonthFontFamily: 'monospace',\r\n                  textDayHeaderFontFamily: 'monospace',\r\n                  textDayFontWeight: '300',\r\n                  textMonthFontWeight: 'bold',\r\n                  textDayHeaderFontWeight: '300',\r\n                  textDayFontSize: 16,\r\n                  textMonthFontSize: 16,\r\n                  textDayHeaderFontSize: 16\r\n                }}\r\n              />\r\n            </View>\r\n            {/* расширенная инфа о предмете, либо список дисциплин */}\r\n            {extraBox}\r\n          </View>\r\n        </View>\r\n      </ScrollView>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScroll: {\r\n    backgroundColor: theme.colors.background,\r\n  },\r\n  container: {\r\n    paddingBottom: 16,\r\n    maxWidth: 700,\r\n    flex: 1,\r\n  },\r\n  dayListStyle:\r\n  {\r\n    flexDirection: 'row',\r\n  },\r\n  description: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: paddingComponent,\r\n    marginVertical: marginComponent\r\n  },\r\n  textTitleStyle: {\r\n    color: theme.colors.text2,\r\n    fontSize: componentTitleSize\r\n  },\r\n  center: {\r\n    textAlign: 'center',\r\n  },\r\n  calendar: {\r\n    margin: marginComponent,\r\n    backgroundColor: theme.colors.card,\r\n    borderRadius: borderRadius,\r\n  }\r\n});\r\nexport default ScheduleActivity","import React from \"react\";\r\n\r\nimport { View, Text, StyleSheet, Image, Color, Platform, ScrollView,Button,Linking,ToastAndroid,TouchableOpacity } from \"react-native\";\r\n\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\n\r\nimport { getDocumentAsync } from \"expo-document-picker\"\r\nimport * as FileSystem from 'expo-file-system';\r\n\r\nimport {\r\n  baseURL, marginComponent, paddingComponent, theme, DEFAULT_STUDENT_PORTRAIT\r\n} from '../constants'\r\n\r\nimport ThemedCard from \"../components/ThemedCard\"\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { keyFor } from \"core-js/fn/symbol\";\r\n\r\nvar bufferedState = null\r\n\r\nvar bufferedSolutions =[]\r\n\r\n\r\nclass StudentActivity extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n      isExtended:null,\r\n      accessToken: null,\r\n      refreshToken: null,\r\n      isStudent: null,\r\n      solutions: [],\r\n      ID: null,\r\n      SYM_GROUP: null,\r\n      SYM_FACULTET: null,\r\n      NAME: null,\r\n      SURNAME: null,\r\n      PATRONYMIC: null,\r\n      ID_PLAN: null,\r\n      YEAR_ADMISSION: null,\r\n      ID_SPECIALIZATION: null,\r\n      ID_FACULTET: null,\r\n      ID_GROUP: null,\r\n\r\n      activatedExitButton: false,\r\n    }\r\n  }\r\n\r\n  startWithToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      const is_student = user_profile.is_student\r\n      \r\n      this._isMounted && this.setState({accessToken:access_token, refreshToken:refresh_token, isStudent:is_student})\r\n\r\n      this.loadUserData()\r\n      this.loadUserTasks()\r\n    } catch(e) {\r\n      console.log(\"catched startWithToken\", e.message)\r\n      this.props.appFunctions.redirect({accessToken:null, refreshToken:null, isStudent:null})\r\n    }\r\n  }\r\n\r\n\r\n  loadUserData = async() =>{\r\n    try {\r\n      const data = {access_token_cookie:this.state.accessToken,refresh_token_cookie:this.state.refreshToken}\r\n      \r\n      let response = await fetch(baseURL+\"/get_student_info\",{\r\n        mode: \"cors\",\r\n        method:\"POST\",\r\n        body: JSON.stringify(data),\r\n        headers:{\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      \r\n      if(response.status == 200){\r\n        let result = (await response.json()).json[0];\r\n\r\n        var info = {\r\n          ID:result.ID,\r\n          SYM_GROUP:result.SYM_GROUP,\r\n          SYM_FACULTET:result.SYM_FACULTET,\r\n          NAME:result.NAME,\r\n          SURNAME:result.SURNAME,\r\n          PATRONYMIC:result.PATRONYMIC,\r\n          ID_PLAN:result.ID_PLAN,\r\n          YEAR_ADMISSION:result.YEAR_ADMISSION,\r\n          ID_SPECIALIZATION:result.ID_SPECIALIZATION,\r\n          ID_FACULTET:result.ID_FACULTET,\r\n          ID_GROUP:result.ID_GROUP\r\n        }\r\n        bufferedState = JSON.parse(JSON.stringify(info))\r\n        this._isMounted && this.setState(info)\r\n      }\r\n      else if(response.status == 400){\r\n        this._isMounted && this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else{\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserData: \",e.message)\r\n    }\r\n  }\r\n\r\n  \r\n  loadUserTasks = async() =>{\r\n    try {\r\n      const data = {access_token_cookie:this.state.accessToken,refresh_token_cookie:this.state.refreshToken}\r\n      \r\n      let response = await fetch(baseURL+\"/solutions_list\",{\r\n        mode: \"cors\",\r\n        method:\"PUT\",\r\n        body: JSON.stringify(data),\r\n        headers:{\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n      \r\n      if(response.status == 200){\r\n        let result = (await response.json());\r\n\r\n        bufferedSolutions = result.data\r\n        this._isMounted && this.setState({\r\n          solutions: result.data\r\n        })\r\n      }\r\n      else if(response.status == 400){\r\n        this._isMounted && this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else{\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserTasks: \", e.message)\r\n    }\r\n  }\r\n\r\n\r\n//////\r\n  \r\nDownloadFile = async (file) => {\r\n    var tmp = file?.path\r\n    var url\r\n    if(tmp) url = tmp\r\n    else{\r\n\r\n      url = bufferedSolutions[file]?.file?.path\r\n    }\r\n    console.log(\"download\",url)\r\n    await Linking.openURL(url)\r\n  }\r\n\r\n  ItemDelete = async (key) => {\r\n    bufferedSolutions = bufferedSolutions.map(function(item,index) { return index == key ? {...item,status:0, file:{}} : item });\r\n    this.setState({ solutions: bufferedSolutions })\r\n  }\r\n\r\n  ChooseFile = async (key) => {\r\n    getDocumentAsync({\r\n      multiple: false,\r\n      copyToCacheDirectory: true,\r\n      type: \"*/*\" // all files\r\n    }).then((file) => {\r\n      if (file.type != \"success\")\r\n        return;\r\n\r\n      file.type = file.name.indexOf(\".\")<0? \"\": (/\\.([0-9a-z]+)(?:[\\?#]|$)/.exec(file.name)[0].toLocaleLowerCase());\r\n      file.extension = file.type.substring(1)\r\n\r\n      const DEFAULT_TYPES = \"pdf;\"\r\n      const IMAGE_TYPES = \"png;jpg;jpeg\"\r\n      const TEXT_TYPES = \"txt;c;h;cpp;cs;java;json;js;php;py;asm;sql;html;xml;yaml;md\"\r\n      const DOC_TYPES = \"xlsx;xlsm;xlsb;xlam;xltx;xltm;xls;xlt;xla;xlm;xlw;odc;ods;prn;csv;dsn;mdb;mde;accdb;accde;dbc;iqy;dqy;rqy;oqy;cub;atom;atomsvc;dbf;xll;xlb;slk;dif;xlk;bak;pptx;ppt;pptm;ppsx;pps;ppsm;potx;pot;potm;odp;thmx;docx;docm;doc;ppam;ppa;docx;docm;dotx;dotm;doc;odt;docx;docm;doc;dotx;dotm;dotx;dotm;rtf;odt;doc;wpd;doc\";\r\n\r\n      \r\n      var isAllowedType = false;\r\n\r\n      if(DEFAULT_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n\r\n      if(DOC_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n          \r\n      if(IMAGE_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n          \r\n      if(TEXT_TYPES.split(\";\").indexOf(file.extension)!=-1) {\r\n          isAllowedType = true;\r\n      }\r\n\r\n      if (!isAllowedType) {\r\n        alert(\"Неверное расширение документа\")\r\n        return;\r\n      }\r\n      var i = this.searchBufferedSolutions(key)\r\n      var newBufSolutions = bufferedSolutions.map((item,index)=>{\r\n        return index == i ? {...item, status:3,file:file} : item\r\n      })\r\n\r\n      if (Platform.OS == \"web\") {\r\n        bufferedSolutions = newBufSolutions\r\n        this.setState({ solutions: newBufSolutions })\r\n      } else {\r\n        var fileLoc = file.uri\r\n\r\n        FileSystem.readAsStringAsync(fileLoc, {encoding:\"base64\"})\r\n            .then(raw=>{\r\n              var uriFile = \"data:application/vnd.custom-type;base64,\" + raw\r\n                \r\n              file.uri = uriFile\r\n              bufferedSolutions = newBufSolutions\r\n              this.setState({ solutions: newBufSolutions })\r\n            })\r\n            .catch(e=>console.log(\"wtf error\"))\r\n      }\r\n      console.log('chhose',bufferedSolutions)\r\n    }).catch((err) => {\r\n      console.error(\"Ошибка\", err);\r\n    })\r\n  }\r\n\r\n  addFile =(key)=>{\r\n    this.ChooseFile(key)\r\n  }\r\n\r\n Confirm = async(key)=>{\r\n  var i = this.searchBufferedSolutions(key)\r\n  if (!bufferedSolutions[i].file)\r\n  return\r\n\r\n  var data = JSON.stringify({access_token:this.state.accessToken,refresh_token:this.state.refreshToken,\r\n    id:bufferedSolutions[i]._id, files:[bufferedSolutions[i].file]})\r\n  \r\n  try {\r\n    let response = await fetch(baseURL + \"/upload_solution\", {\r\n      mode: \"cors\",\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": 'application/vnd.custom-type'\r\n      },\r\n      body: data,\r\n    });\r\n\r\n    console.log(\"response\", response)\r\n\r\n    if (response.status == 200) {\r\n      let result = (await response.json());\r\n      this.loadUserTasks();\r\n      bufferedSolutions = bufferedSolutions.map(function(item,index) { return index == i ? {...item,file:result.data, status:1} : item });\r\n      this.setState({solutions:bufferedSolutions})\r\n    }\r\n    else if (response.status == 401) {\r\n      this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n    }\r\n    else {\r\n      let result = await response.json()\r\n      console.log(result.message)\r\n      alert(result.message)\r\n    }\r\n    this.setState({ isLoading: false })\r\n  } catch (err) {\r\n    console.log('Ошибка', err);\r\n    alert(\"Возникла ошибка при обработке!\")\r\n  }\r\n }\r\n\r\n  componentDidMount(){\r\n      this._isMounted = true;\r\n      this.startWithToken()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  searchBufferedSolutions(id){\r\n    return id;\r\n  }\r\n\r\n  exitApp = async() => {\r\n    if (!this.state.activatedExitButton){\r\n      this.setState({activatedExitButton:true})\r\n      setTimeout(()=>{\r\n        this._isMounted && this.setState({activatedExitButton:false})\r\n      }, 1000)\r\n      return\r\n    }\r\n    \r\n    this._isMounted && await AsyncStorage.removeItem('userProfile')\r\n    this._isMounted && this.props.appFunctions.redirect({accessToken:null, refreshToken:null, isStudent:null})\r\n  }\r\n\r\n  render() {\r\n    const image = { uri: DEFAULT_STUDENT_PORTRAIT };\r\n\r\n    let profileBox = \r\n    <View style={styles.profileBox}>\r\n        <View style={{position:\"absolute\", zIndex:2, right:0}}>\r\n          <TouchableOpacity onPress={()=>this.exitApp()}>\r\n            <MaterialCommunityIcons color={this.state.activatedExitButton? theme.colors.accent: theme.colors.text2} name=\"exit-to-app\" size={24} />\r\n          </TouchableOpacity>\r\n        </View>\r\n        <Image style={styles.img}\r\n        source={image}\r\n        />\r\n        {bufferedState?\r\n          <View style={styles.profile_fields_box}>\r\n            <Text style={styles.field_name}>{bufferedState.SURNAME} {bufferedState.NAME} {bufferedState.PATRONYMIC}</Text>\r\n            <Text style={styles.field_group}>{bufferedState.SYM_FACULTET}, Группа {bufferedState.SYM_GROUP}</Text>\r\n          </View>:<View/>\r\n        }\r\n    </View>\r\n\r\n    let extendButton = (key) => {\r\n      var index = this.searchBufferedSolutions(key)\r\n      var result\r\n      if (this.state.isExtended == index) result = null\r\n      else result = index\r\n      return <View style={styles.listItemButton}><Button title=\"Подробнее 𝌒\"\r\n        onPress={() => this.setState({ isExtended: result }) } color={theme.colors.accent} /></View>\r\n    }\r\n\r\n    let addButton = (key) => {\r\n      var index = this.searchBufferedSolutions(key)\r\n      var item =bufferedSolutions[index]\r\n      return <View style={styles.listItemButton}><Button title=\"+\" disabled={item.status != 0? true:false}\r\n        onPress={() => this.addFile(key)} color={theme.colors.accent} /></View>\r\n    }\r\n\r\n    let downloadButtton = (key, file = null) => {\r\n\r\n      return <View style={styles.listItemButton}><Button color={theme.colors.accent}\r\n        title=\"Открыть\" onPress={() => this.DownloadFile(file?file:key)} /></View>\r\n    }\r\n\r\n    let confirmButton=(key)=>{\r\n      return <View style={styles.listItemButton}><Button color={theme.colors.accent}\r\n      title=\"Подтвердить ✓\" onPress={() => this.Confirm(key)}/></View>\r\n    }\r\n\r\n    let deleteButton = (key) => {\r\n      return <View style={styles.listItemButton}><Button\r\n        title=\"⛌\" onPress={() => this.ItemDelete(key)} color=\"#dc3545\"/></View>\r\n    }\r\n\r\n\r\n    let extension = (prop, key) => {\r\n      var index = this.searchBufferedSolutions(key)\r\n      return this.state.isExtended == index ?\r\n      <View>\r\n        <Text style={styles.field_description}>{prop.description}</Text>\r\n        {prop.methods.map((item,key)=>{\r\n          return taskFiles(item,key)\r\n        })}\r\n        \r\n      </View>\r\n        :\r\n        <></>\r\n    }\r\n\r\n\r\n\r\n    let taskFiles = (file,key) => {\r\n      return <View style={styles.downloadFileBox} key={key}>\r\n        <Text style={[styles.field_group,{paddingEnd: paddingComponent}]}>{file.name}</Text>\r\n        {downloadButtton(key,file)}\r\n      </View>\r\n    }\r\n\r\n    let solutionsListBox = (!bufferedSolutions) ? <View /> :\r\n      bufferedSolutions.map((prop, key) => {\r\n        var status,file,fileName\r\n        switch (prop.status) {\r\n          case 0:\r\n            status = \"Не сдано\";\r\n            break;\r\n          case 1:\r\n            status = \"На проверке\";\r\n            break;\r\n          case 2:\r\n            status = \"Проверено\";\r\n            break;\r\n          case 3:\r\n            status = \"Подтвердите отправку\";\r\n            break;\r\n        }\r\n        \r\n        if(prop.file){\r\n          fileName = prop.file.name\r\n        }\r\n\r\n        var date = new Date(prop.date)\r\n        var minutes = date.getMinutes() == 0 ? '00': date.getMinutes()\r\n        var strDate = date.getDate()+'.'+ date.getMonth() +'.'+ date.getFullYear()+' '+date.getHours()+':'+ minutes\r\n\r\n        var innerText =\r\n        (<View style={styles.listview}>\r\n          <Text style={styles.listItemHeader}>\r\n            {key + 1}. {prop.title} до {strDate} ({status})\r\n          </Text>\r\n          <Text style={styles.listItemHeader}>\r\n            {extension(prop, key)}\r\n          </Text>\r\n          <View style ={styles.buttons}>\r\n          {fileName &&(<><MaterialCommunityIcons color={theme.colors.text2} name=\"file\" size={24} /><Text style={styles.field_task}>{fileName}</Text></>)}\r\n          {prop.status == 1 && downloadButtton(key)}\r\n          {prop.status == 3 && confirmButton(key)}\r\n          {(prop.status == 3) && deleteButton(key)}\r\n          </View>\r\n        </View>)\r\n\r\n        return (\r\n        <View style={styles.solutionsListBox} key={key}>\r\n          {innerText}\r\n          <View style ={styles.buttons}>\r\n          {extendButton(key)}\r\n          {prop.status == 0 && addButton(key)}\r\n          </View>\r\n          \r\n        </View>\r\n        );\r\n      })\r\n\r\n\r\n\r\n    let solutionsBox = !bufferedState ? <View style={styles.field_info} /> :\r\n  <View style={styles.field_info}>\r\n        <Text style={styles.field_name}>Состояние отправленных работ:</Text>\r\n        {solutionsListBox}\r\n    </View>\r\n    \r\n    return (\r\n      <ScrollView style={styles.mainScroll} contentContainerStyle={{flexDirection:'row', justifyContent: 'center'}}>\r\n        <View style={styles.container}>\r\n          <ThemedCard>\r\n            {profileBox}\r\n          </ThemedCard>\r\n          <ThemedCard>\r\n            {solutionsBox}\r\n          </ThemedCard>\r\n        </View>\r\n      </ScrollView>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScroll: {\r\n    backgroundColor: theme.colors.background,\r\n  },\r\n  container: {\r\n    paddingBottom:16,\r\n    maxWidth:700,\r\n    flex: 1,\r\n  },\r\n  listItemHeader: {\r\n    color: theme.colors.text2,\r\n    margin: 10,\r\n    ...Platform.select({\r\n      android: {\r\n        fontSize: 12,\r\n      },\r\n      default: {\r\n        fontSize: 15,\r\n      }\r\n    }),\r\n  },\r\n  profile_fields_box: {\r\n    flexDirection: 'column',\r\n    flexShrink:1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    maxWidth:700,\r\n  },\r\n  field_name: {\r\n    margin: 8,\r\n    flexShrink:1,\r\n    fontSize: 20,\r\n    color: theme.colors.text,\r\n    fontWeight: \"bold\",\r\n  },\r\n  field_description: {\r\n    flexShrink:1,\r\n    flexDirection:\"column\",\r\n    flex:1,\r\n    color: theme.colors.text2,\r\n    fontWeight: \"bold\",\r\n  },\r\n  field_group: {\r\n    fontSize: 18,\r\n    color: theme.colors.text2\r\n  },\r\n  img: {\r\n    width: 100,\r\n    height: 100,\r\n    borderRadius: 50,\r\n    marginRight: 12,\r\n    alignItems: \"center\"\r\n  },\r\n  profileBox: {\r\n    flexDirection: 'row',\r\n    flexWrap: \"wrap\",\r\n    justifyContent: \"center\",\r\n    flex: 1,\r\n    maxWidth: 700,\r\n  },\r\n  field_info: {\r\n    flexDirection: 'column',\r\n    flex: 1,\r\n    maxWidth: 700,\r\n  },\r\n  listItemButton: {\r\n    ...Platform.select({\r\n      android: {\r\n        marginLeft: 6,\r\n      },\r\n      default: {\r\n        marginLeft: 8,\r\n      }\r\n    }),\r\n  },\r\n  downloadFileBox: {\r\n    alignItems:'center',\r\n    justifyContent:\"center\",\r\n    marginTop: marginComponent,\r\n    flexDirection: 'row',\r\n  },\r\n  solutionsListBox:{\r\n    margin: marginComponent,\r\n  },\r\n  listview: {\r\n    backgroundColor: theme.colors.background,\r\n    borderRadius: 4,\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n    margin: 4,\r\n    flex: 1,\r\n  },\r\n  field_task:{\r\n    color:theme.colors.text2,\r\n  },\r\n  buttons:{\r\n    margin: marginComponent,\r\n    flexDirection: 'row',\r\n    flexWrap: \"wrap\",\r\n    alignItems:'center',\r\n    justifyContent: \"center\",\r\n    flex: 1,\r\n  }\r\n});\r\n\r\nexport default StudentActivity;\r\n","import React from \"react\";\r\nimport { View, Text, StyleSheet, Image, Color, Button,\r\n  Linking, Platform, ScrollView, TouchableOpacity } from \"react-native\";\r\n\r\nimport {\r\n  baseURL, theme, DEFAULT_TEACHER_PORTRAIT,\r\n} from '../constants'\r\n\r\nimport ThemedCard from \"../components/ThemedCard\"\r\n\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nvar bufferedState = null\r\nvar bufferedSolutions =[]\r\n\r\nclass TeacherActivity extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      accessToken: null,\r\n      refreshToken: null,\r\n      isStudent: null,\r\n      solutions: [],\r\n\r\n      ID: null,\r\n      NAME: null,\r\n      SURNAME: null,\r\n      PATRONYMIC: null,\r\n      FIO: null,\r\n      DEGREE: null,\r\n      POST: null,\r\n      MAIN_SUBDIVISION: null,\r\n      CABINET: null,\r\n      EMAIL: null,\r\n      SITE_LINK: null,\r\n      PORTRAIT_URL: null,\r\n\r\n      activatedExitButton: false,\r\n    }\r\n  }\r\n\r\n  startWithToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      const is_student = user_profile.is_student\r\n\r\n      this._isMounted && this.setState({ accessToken: access_token, refreshToken: refresh_token, isStudent: is_student })\r\n\r\n      this._isMounted && this.loadTeacherID()\r\n    } catch (e) {\r\n      console.log(\"catched startWithToken\", e.message)\r\n      this._isMounted && this.props.appFunctions.redirect({ accessToken: null, refreshToken: null, isStudent: null })\r\n    }\r\n  }\r\n\r\n  \r\n  loadTeacherID = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken }\r\n\r\n      let responseId = await fetch(baseURL + \"/get_teacher_id\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (responseId.status == 200) {\r\n        let resultId = (await responseId.json()).json[0];\r\n\r\n        var info = {\r\n          ID: resultId.ID_PERSON\r\n        }\r\n\r\n        this._isMounted && this.setState(info)\r\n        this._isMounted && this.loadUserData()\r\n        this._isMounted && this.loadUserTasks()\r\n      }\r\n      else if (responseId.status == 400) {\r\n        this._isMounted && this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await responseId.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadTeacherID: \", e.message)\r\n    }\r\n  }\r\n\r\n\r\n  loadUserData = async () => {\r\n    try {\r\n      const data = { access_token_cookie: this.state.accessToken, refresh_token_cookie: this.state.refreshToken, id: 80087 }\r\n\r\n      let response = await fetch(baseURL + \"/get_teacher_info\", {\r\n        mode: \"cors\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json()).json[0];\r\n\r\n        var info = {\r\n          ID: result.ID,\r\n          NAME: result.NAME,\r\n          SURNAME: result.SURNAME,\r\n          PATRONYMIC: result.PATRONYMIC,\r\n          FIO: result.FIO,\r\n          DEGREE: result.DEGREE,\r\n          POST: result.POST,\r\n          MAIN_SUBDIVISION: result.MAIN_SUBDIVISION,\r\n          CABINET: result.CABINET,\r\n          EMAIL: result.EMAIL,\r\n          SITE_LINK: result.SITE_LINK,\r\n          PORTRAIT_URL: result.PORTRAIT_URL,\r\n        }\r\n        bufferedState = JSON.parse(JSON.stringify(info))\r\n        this._isMounted && this.setState(info)\r\n      }\r\n      else if (response.status == 400) {\r\n        this._isMounted && this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserData: \", e.message)\r\n    }\r\n  }\r\n\r\n  \r\n  loadUserTasks = async() =>{\r\n    try {\r\n      const data = {access_token:this.state.accessToken,refresh_token:this.state.refreshToken}\r\n      \r\n      let response = await fetch(baseURL+\"/executed_list\",{\r\n        mode: \"cors\",\r\n        method:\"PUT\",\r\n        body: JSON.stringify(data),\r\n        headers:{\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n      \r\n      if(response.status == 200){\r\n        let result = (await response.json());\r\n\r\n        bufferedSolutions = result\r\n        this._isMounted && this.setState({\r\n          solutions: result\r\n        })\r\n      }\r\n      else if(response.status == 401){\r\n        this._isMounted && this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else{\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserTasks: \", e.message)\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ItemOpenInfo = async (key) => {\r\n    var sol = bufferedSolutions[key]\r\n    var url = sol.file.path\r\n    await Linking.openURL(url);\r\n  }\r\n\r\n  SubmitTeacherAnswer = async (key, ans) => {\r\n    var sol = bufferedSolutions[key]\r\n    \r\n\r\n    try {\r\n      const data = {access_token:this.state.accessToken,refresh_token:this.state.refreshToken, conclusion:ans, solution_id:sol.solution_id}\r\n      \r\n      let response = await fetch(baseURL+\"/upload_validation\",{\r\n        mode: \"cors\",\r\n        method:\"POST\",\r\n        body: JSON.stringify(data),\r\n        headers:{\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n      \r\n      if(response.status == 200){\r\n        let result = (await response.json());\r\n        \r\n        this.loadUserTasks();\r\n      }\r\n      else if(response.status == 401){\r\n        this._isMounted && this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else{\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n    } catch (e) {\r\n      console.log(\"catch loadUserTasks: \", e.message)\r\n    }\r\n\r\n  }\r\n\r\n  ItemAccept = async (key) => {\r\n    this.SubmitTeacherAnswer(key, false)\r\n  }\r\n\r\n  ItemDeny = async (key) => {\r\n    this.SubmitTeacherAnswer(key, true)\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    this.startWithToken()\r\n  }\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  exitApp = async() => {\r\n    if (!this.state.activatedExitButton){\r\n      this.setState({activatedExitButton:true})\r\n      setTimeout(()=>{\r\n        this._isMounted && this.setState({activatedExitButton:false})\r\n      }, 1000)\r\n      return\r\n    }\r\n    \r\n    this._isMounted && await AsyncStorage.removeItem('userProfile')\r\n    this._isMounted && this.props.appFunctions.redirect({accessToken:null, refreshToken:null, isStudent:null})\r\n  }\r\n\r\n\r\n  render() {\r\n    const { navigation, accessToken, refreshToken } = this.props;\r\n\r\n    const image = ((bufferedState == null || bufferedState.PORTRAIT_URL == null) ? DEFAULT_TEACHER_PORTRAIT : bufferedState.PORTRAIT_URL)\r\n    \r\n    let chairBox = (bufferedState == null || bufferedState.MAIN_SUBDIVISION == null)?<></>:\r\n      <Text style={styles.field_group}>Кафедра: {bufferedState.MAIN_SUBDIVISION}</Text>\r\n\r\n    let cabinetBox = (bufferedState == null || bufferedState.CABINET == null)?<></>:\r\n      <Text style={styles.field_group}>Кабинет: {bufferedState.CABINET}</Text>\r\n\r\n    let degreeBox = (bufferedState == null || (bufferedState.DEGREE == null && bufferedState.POST == null))?<></>:\r\n      <Text style={styles.field_group}>{bufferedState.POST}{bufferedState.DEGREE?\", \" + bufferedState.DEGREE:\"\"}</Text>\r\n          \r\n\r\n    let profileBox =\r\n      <View style={styles.profileBox}>\r\n        <View style={{position:\"absolute\", zIndex:2, right:0}}>\r\n          <TouchableOpacity onPress={()=>this.exitApp()}>\r\n            <MaterialCommunityIcons color={this.state.activatedExitButton? theme.colors.accent: theme.colors.text2} name=\"exit-to-app\" size={24} />\r\n          </TouchableOpacity>\r\n        </View>\r\n        <Image style={styles.img}\r\n          source={image}\r\n        />\r\n        {bufferedState ?\r\n          <View style={styles.profile_fields_box}>\r\n            <Text style={styles.field_name}>{bufferedState.SURNAME} {bufferedState.NAME} {bufferedState.PATRONYMIC}</Text>\r\n            {chairBox}\r\n            {cabinetBox}\r\n            {degreeBox}\r\n          </View> : <View />\r\n        }\r\n\r\n      </View>\r\n\r\n    \r\n    \r\n    let filesListView =\r\n      bufferedSolutions.map((prop, key) => {\r\n        console.log(\"next Prop\", prop)\r\n        var innerText = prop.title + \" (\" + prop.description + \")\\n\"+prop.student_name+\", \"+prop.group;\r\n        return (\r\n        <View style={styles.listview} key={key}>\r\n          <View style={{ flex: 1 }}><Text style={styles.listItemHeader}>{innerText}</Text></View>\r\n          <View style={styles.listItemButton}><Button title=\"𝌒\" onPress={() => this.ItemOpenInfo(key)}/></View>\r\n          <View style={styles.listItemButton}><Button title=\"✓\" onPress={() => this.ItemAccept(key)}/></View>\r\n          <View style={styles.listItemButton}><Button title=\"⛌\" onPress={() => this.ItemDeny(key)} color=\"#dc3545\"/></View>\r\n        </View>);\r\n      })\r\n\r\n    let solutionsBox = !bufferedState? <View style={styles.field_info}/>:\r\n    <View style={styles.field_info}>\r\n        {bufferedSolutions.length==0?(<Text style={styles.field_checkedHeader}>Непроверенные работы отсутствуют</Text>):\r\n        (<Text style={styles.field_checkedHeader}>Непроверенные работы:</Text>)}\r\n        {bufferedSolutions.length==0?<View />:filesListView}\r\n    </View>\r\n\r\n\r\n    return (\r\n      <ScrollView style={styles.mainScroll} contentContainerStyle={{flexDirection:'row', justifyContent: 'center'}}>\r\n        <View style={styles.container}>\r\n          <ThemedCard>\r\n            {profileBox}\r\n          </ThemedCard>\r\n          <ThemedCard>\r\n            {solutionsBox}\r\n          </ThemedCard>\r\n        </View>\r\n      </ScrollView>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScroll: {\r\n    backgroundColor: theme.colors.background,\r\n  },\r\n  container: {\r\n    paddingBottom:16,\r\n    maxWidth:700,\r\n    flex: 1,\r\n  },\r\n  profile_fields_box: {\r\n    flexDirection: 'column',\r\n    flexShrink:1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    maxWidth:700,\r\n  },\r\n  listview: {\r\n    backgroundColor: theme.colors.background,\r\n    borderRadius: 4,\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    margin: 4,\r\n    flex: 1,\r\n  },\r\n  listItemHeader: {\r\n    color: theme.colors.text2,\r\n    margin: 10,\r\n    ...Platform.select({\r\n      android: {\r\n        fontSize: 12,\r\n      },\r\n      default: {\r\n        fontSize: 15,\r\n      }\r\n    }),\r\n  },\r\n  listItemButton: {\r\n    ...Platform.select({\r\n      android: {\r\n        marginLeft: 6,\r\n      },\r\n      default: {\r\n        marginLeft: 8,\r\n      }\r\n    }),\r\n  },\r\n  field_name: {\r\n    flexShrink:1,\r\n    fontSize: 20,\r\n    color: theme.colors.text,\r\n    fontWeight: \"bold\",\r\n  },\r\n  field_group: {\r\n    fontSize: 18,\r\n    color: theme.colors.text2\r\n  },\r\n  field_checkedHeader: {\r\n    fontSize: 18,\r\n    marginBottom: 8,\r\n    color: theme.colors.text2\r\n  },\r\n  img: {\r\n    width: 100,\r\n    height: 100,\r\n    borderRadius: 50,\r\n    marginRight: 12,\r\n    alignItems: \"center\"\r\n  },\r\n  profileBox: {\r\n    flexDirection: 'row',\r\n    flexWrap: \"wrap\",\r\n    justifyContent: \"center\",\r\n    flex: 1,\r\n    maxWidth: 700,\r\n  },\r\n  field_info: {\r\n    flexDirection: 'column',\r\n    flex: 1,\r\n    maxWidth: 700,\r\n  }\r\n});\r\n\r\nexport default TeacherActivity;\r\n","import React from \"react\";\r\nimport { View, Text, StyleSheet } from \"react-native\";\r\n\r\nimport {\r\n  backgroundColor\r\n} from '../constants'\r\n\r\nclass TaskActivity extends React.Component {\r\n  render() {\r\n    const { navigation } = this.props;\r\n    \r\n    \r\n    return (\r\n      <View style={styles.container}>\r\n        <Text style={styles.welcome}>создание заданий для препода</Text>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: backgroundColor\r\n  },\r\n  welcome: {\r\n    fontSize: 20,\r\n    textAlign: \"center\",\r\n    margin: 10\r\n  }\r\n});\r\n\r\nexport default TaskActivity;","import React from \"react\";\r\nimport { View, Button, StyleSheet, Text, Dimensions } from \"react-native\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport AuthActivity from \"./authorization_module/AuthActivity\"\r\nimport ChatActivity from \"./chat_module/ChatActivity\"\r\nimport ConverterActivity from \"./converter_module/ConverterActivity\"\r\nimport ScheduleActivity from './schedule_module/ScheduleActivity';\r\nimport StudentActivity from './student_module/StudentActivity';\r\nimport TeacherActivity from './teacher_module/TeacherActivity';\r\nimport TaskActivity from './task_module/TaskActivity';\r\nimport SplashActivity from \"./SplashActivity\"\r\nimport { backgroundColor, headerFontSize, marginComponent, paddingComponent, textColor } from \"./constants\";\r\nimport { TouchableOpacity } from \"react-native\";\r\n\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\n\r\nimport { theme } from './constants';\r\n\r\nvar oldLoc = 0\r\n\r\nconst TopNavStudent = ({ history }) => {\r\n  if(history.location.pathname.length < 2)\r\n    history.push(\"/app/\")\r\n\r\n  var locations = [\r\n    {name: \"Главная\", href: \"/app/\", icon: 'account-circle-outline'},\r\n    {name: \"Расписание\", href: \"/app/schedule\", icon: 'timetable'},\r\n    {name: \"Чат\", href: \"/app/rooms\", icon: 'chat-outline'},\r\n    {name: \"Конвертер\", href: \"/app/converter\", icon: 'file-compare'},\r\n  ]\r\n\r\n  var bigScreen = Dimensions.get('window').width > 600;\r\n  \r\n  let navButtons =\r\n    locations.map((prop, key) => {\r\n      var isActive = history.location.pathname==prop.href || (window.location.pathname.startsWith(\"/app/chat/\") && prop.href == \"/app/rooms\")\r\n      var color = isActive? theme.colors.accent: theme.colors.text2\r\n      return (\r\n      <TouchableOpacity style={styles.button} key={key} onPress={() => history.push(prop.href)}>\r\n        <MaterialCommunityIcons name={prop.icon} size={24} color={color} style={styles.icon} />\r\n        {bigScreen?<Text color={color} style={[styles.text, {color:color}]}>{prop.name}</Text>:<View/>}\r\n      </TouchableOpacity>\r\n      );\r\n    })\r\n    \r\n  return (\r\n    <View style={styles.main}>{navButtons}</View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  main: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-evenly\",\r\n    backgroundColor: theme.colors.card,\r\n  },\r\n  button: {\r\n    overflow: \"hidden\",\r\n    flex: 1,\r\n    paddingBottom: paddingComponent,\r\n    backgroundColor: theme.colors.card,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\"\r\n  },\r\n  text: {\r\n    textColor: textColor,\r\n    fontSize: headerFontSize-4,\r\n  },\r\n  icon: {\r\n    marginTop: 12,\r\n    margin: 8,\r\n  },\r\n});\r\n\r\nexport default withRouter(TopNavStudent);\r\n","import React from \"react\";\r\nimport { View, Button, StyleSheet, Text, Dimensions } from \"react-native\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport AuthActivity from \"./authorization_module/AuthActivity\"\r\nimport ChatActivity from \"./chat_module/ChatActivity\"\r\nimport ConverterActivity from \"./converter_module/ConverterActivity\"\r\nimport ScheduleActivity from './schedule_module/ScheduleActivity';\r\nimport StudentActivity from './student_module/StudentActivity';\r\nimport TeacherActivity from './teacher_module/TeacherActivity';\r\nimport TaskActivity from './task_module/TaskActivity';\r\nimport SplashActivity from \"./SplashActivity\"\r\nimport { backgroundColor, headerFontSize, mainColor, marginComponent, paddingComponent, textColor } from \"./constants\";\r\nimport { TouchableOpacity } from \"react-native\";\r\n\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\n\r\nimport { theme } from './constants';\r\n\r\n\r\nconst TopNavTeacher = ({ history }) => {\r\n  if(history.location.pathname.length < 2)\r\n    history.push(\"/app/\")\r\n\r\n  var locations = [\r\n    {name: \"Главная\", href: \"/app/\", icon: 'account-circle-outline'},\r\n    {name: \"Чат\", href: \"/app/rooms\", icon: 'chat-outline'},\r\n    {name: \"Расписание\", href: \"/app/schedule\", icon: 'timetable'},\r\n    {name: \"Конвертер\", href: \"/app/converter\", icon: 'file-compare'},\r\n  ]\r\n  \r\n  var bigScreen = Dimensions.get('window').width > 800;\r\n\r\n    \r\n  let navButtons =\r\n  locations.map((prop, key) => {\r\n    var isActive = history.location.pathname==prop.href || (window.location.pathname.startsWith(\"/app/chat/\") && prop.href == \"/app/rooms\")\r\n    var color = isActive? theme.colors.accent: theme.colors.text2\r\n    return (\r\n    <TouchableOpacity style={styles.button} key={key} onPress={() => history.push(prop.href)}>\r\n      <MaterialCommunityIcons name={prop.icon} size={24} color={color} style={styles.icon} />\r\n      {bigScreen?<Text color={color} style={[styles.text, {color:color}]}>{prop.name}</Text>:<View/>}\r\n    </TouchableOpacity>\r\n    );\r\n  })\r\n    \r\n  return (\r\n    <View style={styles.main}>{navButtons}</View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  main: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-evenly\",\r\n    backgroundColor: theme.colors.card,\r\n  },\r\n  button: {\r\n    overflow: \"hidden\",\r\n    flex: 1,\r\n    paddingBottom: paddingComponent,\r\n    backgroundColor: theme.colors.card,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\"\r\n  },\r\n  text: {\r\n    textColor: textColor,\r\n    fontSize: headerFontSize-4,\r\n  },\r\n  icon: {\r\n    marginTop: 12,\r\n    margin: 8,\r\n  },\r\n});\r\n\r\nexport default withRouter(TopNavTeacher);\r\n","import { View, ScrollView, Text, StyleSheet, Platform, FlatList,Image, TouchableOpacity } from \"react-native\";\r\nimport React, { useState, useEffect, useLayoutEffect } from 'react';\r\nimport { useNavigation, useRoute } from '@react-navigation/native';\r\n\r\nimport ThemedCard from \"../components/ThemedCard\"\r\n\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nimport {\r\n  h, w,\r\n  marginComponent,\r\n  paddingComponent,\r\n  componentTitleSize,\r\n  componentFontSize,\r\n  elevation,\r\n  borderRadius,\r\n  borderWidth,\r\n  baseURL,\r\n  boxShadow,\r\n  DEFAULT_TEACHER_PORTRAIT,\r\n  theme,\r\n} from '../constants'\r\n\r\nvar bufferedChats = []\r\nvar bufferedId = -1\r\nvar _isMounted = false\r\n\r\nexport default function ChatRoomsActivity({navigation,appFunctions}) {\r\n  const [rooms, setRooms] = useState([])\r\n  const [myId, setMyId] = useState(bufferedId)\r\n  const [token, setToken] = useState({ accessToken: null, refreshToken: null })\r\n  if(Platform.OS =='android'){\r\n    navigation = useNavigation()\r\n  }\r\n\r\n\r\n  const startWithToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      const is_student = user_profile.is_student\r\n      _isMounted && setToken({ accessToken: access_token, refreshToken: refresh_token })\r\n    } catch (e) {\r\n      console.log(\"catched startWithToken\", e.message)\r\n      this.props.appFunctions.redirect({ accessToken: null, refreshToken: null, isStudent: null })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    _isMounted = true;\r\n    startWithToken()\r\n  }, [])\r\n\r\n  useEffect(async () => {\r\n    if(token.accessToken ==null) return\r\n    ////////получить чаты\r\n    const data = {\r\n      access_token_cookie: token.accessToken,\r\n      refresh_token_cookie: token.refreshToken\r\n    }\r\n    try {\r\n      const response = await fetch(baseURL + \"/chat/rooms\", {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      const json = await response.json()\r\n      //console.log(json[0].rooms)\r\n      if (response.status == 200) {\r\n        if (json[0]) {\r\n          bufferedChats = json[0].rooms\r\n          bufferedId = json[0].usr_id\r\n          _isMounted && setMyId(json[0].usr_id)\r\n          _isMounted && setRooms(bufferedChats)\r\n        } else {\r\n          bufferedChats = []\r\n          _isMounted && setRooms(bufferedChats)\r\n          console.log(\"rooms array is empty\")\r\n        }\r\n      } else{\r\n        console.error('response status in rooms', response.status)\r\n        appFunctions.tryRefreshToken(startWithToken)\r\n      } \r\n    } catch (error) {\r\n      _isMounted && appFunctions.tryRefreshToken(startWithToken)\r\n      console.error('error in rooms:', error);\r\n    }\r\n  }, [token])\r\n  \r\n  useLayoutEffect(() => {\r\n    return () => {\r\n      _isMounted = false;\r\n    }\r\n  }, [])\r\n\r\n  function openChat(room_id, user_id){\r\n    navigation.navigate(Platform.OS == 'web'?'Chat':'chat', { room_id: room_id, my_id: user_id })\r\n  }\r\n\r\n  const renderItem = ({ item, key }) => {\r\n    return (\r\n      <ThemedCard style={styles.nopadding} key={key}>\r\n        <TouchableOpacity style={styles.dialogBox} onPress={()=>openChat(item.room_id, bufferedId)}>\r\n          <Image style={styles.img}\r\n            source={{uri: item.img==null?DEFAULT_TEACHER_PORTRAIT:item.img}}\r\n          />\r\n          <Text\r\n            style={styles.text}>\r\n            {item.companionName}\r\n          </Text>\r\n          {item.status?\r\n          <View style={{justifyContent:'center'}}>\r\n            <MaterialCommunityIcons name=\"record-circle\" size={componentTitleSize} color={theme.colors.accent} style={styles.icon} />\r\n          </View>\r\n          : null}   \r\n        </TouchableOpacity>     \r\n      </ThemedCard>\r\n    )\r\n  }\r\n    \r\n  let chatListBox = (bufferedChats.length == 0)?\r\n    <Text style={styles.noChatsPlaceholder}>НЕТ ЧАТОВ</Text>:\r\n    bufferedChats.map((prop, key) => {\r\n        return (renderItem({item:prop, key:key}));\r\n    })\r\n\r\n  return (\r\n    <ScrollView style={styles.mainScroll} contentContainerStyle={{flexDirection:'row', justifyContent: 'center'}}>\r\n      <View style={styles.container}>\r\n        {chatListBox}\r\n      </View>\r\n    </ScrollView>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScroll: {\r\n    backgroundColor: theme.colors.background,\r\n  },\r\n  container: {\r\n    paddingBottom:16,\r\n    maxWidth:700,\r\n    flex: 1,\r\n  },\r\n  dialogBox: {\r\n    padding: 15,\r\n    flexDirection: 'row',\r\n    flexWrap: \"wrap\",\r\n    justifyContent: \"center\",\r\n    flex: 1,\r\n  },\r\n  noChatsPlaceholder: {\r\n    color: theme.colors.text2,\r\n    textAlign: 'center',\r\n    fontSize: 20,\r\n    margin: 16\r\n  },\r\n  text: {\r\n    fontSize: componentFontSize,\r\n    color: theme.colors.text,\r\n    alignSelf: \"center\",\r\n    flex: 1,\r\n    margin: 4,\r\n  },\r\n  img: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 50,\r\n    marginRight: marginComponent,\r\n    alignItems: \"center\"\r\n  },\r\n  nopadding: {\r\n    padding:0\r\n  },\r\n});","import React from \"react\";\r\nimport { \r\n  View, Text, StyleSheet, Button, Platform, ScrollView, TextInput,ToastAndroid\r\n} from \"react-native\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport ThemedCard from '../components/ThemedCard'\r\nimport { Card } from \"react-native-elements\";\r\n\r\nimport {\r\n  backgroundColor,\r\n  baseURL,\r\n  borderRadius,\r\n  borderWidth,\r\n  headerFontSize,\r\n  marginComponent,\r\n  paddingComponent,\r\n  textColor,\r\n  theme\r\n} from '../constants'\r\n\r\nimport { getDocumentAsync } from \"expo-document-picker\"\r\nimport * as FileSystem from 'expo-file-system';\r\n\r\nclass AddTaskActivity extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // var today = new Date();\r\n    // today.setHours(0, 0, 0, 0);\r\n\r\n    this.state = {\r\n      files: [],\r\n      isLoading: false,\r\n      isAdded: false,\r\n      accessToken:null,\r\n      refreshToken:null,\r\n      title:\"\",\r\n      description:\"\"\r\n      \r\n      // resultConverted: {},\r\n    }\r\n  }\r\n\r\n  startWithToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      this.setState({ accessToken: access_token, refreshToken: refresh_token })\r\n    } catch (e) {\r\n      console.log(\"catched startWithToken\", e.message)\r\n      this.props.appFunctions.redirect({ accessToken: null, refreshToken: null, isStudent: null })\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    this.startWithToken()\r\n  }\r\n\r\n  bytesToSize(bytes) {\r\n    var sizes = ['Б', 'КБ', 'МБ', 'ГБ', 'ТБ'];\r\n    if (bytes == 0) return '0 Б';\r\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\r\n    return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\r\n  }\r\n\r\n  ChooseFile = async () => {\r\n    getDocumentAsync({\r\n      multiple: false,\r\n      copyToCacheDirectory: true,\r\n      type: \"*/*\" // all files\r\n    }).then((file) => {\r\n      if (file.type != \"success\")\r\n        return;\r\n\r\n      file.type = file.name.indexOf(\".\")<0? \"\": (/\\.([0-9a-z]+)(?:[\\?#]|$)/.exec(file.name)[0].toLocaleLowerCase());\r\n      file.extension = file.type.substring(1)\r\n\r\n      const DEFAULT_TYPES = \"pdf;\"\r\n      const IMAGE_TYPES = \"png;jpg;jpeg\"\r\n      const TEXT_TYPES = \"txt;c;h;cpp;cs;java;json;js;php;py;asm;sql;html;xml;yaml;md\"\r\n      const DOC_TYPES = \"xlsx;xlsm;xlsb;xlam;xltx;xltm;xls;xlt;xla;xlm;xlw;odc;ods;prn;csv;dsn;mdb;mde;accdb;accde;dbc;iqy;dqy;rqy;oqy;cub;atom;atomsvc;dbf;xll;xlb;slk;dif;xlk;bak;pptx;ppt;pptm;ppsx;pps;ppsm;potx;pot;potm;odp;thmx;docx;docm;doc;ppam;ppa;docx;docm;dotx;dotm;doc;odt;docx;docm;doc;dotx;dotm;dotx;dotm;rtf;odt;doc;wpd;doc\";\r\n\r\n      \r\n      var isAllowedType = false;\r\n\r\n      if(DEFAULT_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n\r\n      if(DOC_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n          \r\n      if(IMAGE_TYPES.split(\";\").indexOf(file.extension)!=-1)\r\n          isAllowedType = true;\r\n          \r\n      if(TEXT_TYPES.split(\";\").indexOf(file.extension)!=-1) {\r\n          isAllowedType = true;\r\n      }\r\n\r\n      if (!isAllowedType) {\r\n        alert(\"Неверное расширение документа\")\r\n        return;\r\n      }\r\n\r\n\r\n      if (Platform.OS == \"web\") {\r\n        this.setState({ isAdded: false })\r\n        this.setState({ files: this.state.files.concat(file) })\r\n      } else {\r\n        var fileLoc = file.uri\r\n\r\n        FileSystem.readAsStringAsync(fileLoc, {encoding:\"base64\"})\r\n            .then(raw=>{\r\n              var uriFile = \"data:application/vnd.custom-type;base64,\" + raw\r\n                \r\n              file.uri = uriFile\r\n\r\n              this.setState({ isAdded: false})\r\n              this.setState({ files: this.state.files.concat(file) })\r\n            })\r\n            .catch(e=>console.log(\"wtf error\"))\r\n      }\r\n    }).catch((err) => {\r\n      console.error(\"Ошибка\", err);\r\n    })\r\n  }\r\n\r\n  Save = async()=>{\r\n    var date, time, group\r\n    if (Platform.OS == 'android') {\r\n      date = this.props.route.params.date\r\n      time = this.props.route.params.time\r\n      group = this.props.route.params.group\r\n    } else {\r\n      date = this.props.navigation.getParam('date', -1)\r\n      time = this.props.navigation.getParam('time', -1)\r\n      group = this.props.navigation.getParam('group', -1)\r\n    }\r\n    \r\n    date = new Date(decodeURIComponent(date))\r\n    time = decodeURIComponent(time)\r\n    group = decodeURIComponent(group)\r\n    date.setHours(time.substring(0,2),time.substring(3,5),0,0)\r\n    \r\n    var data = JSON.stringify({access_token:this.state.accessToken,refresh_token:this.state.refreshToken,\r\n      date:date, group: group, title:this.state.title, description:this.state.description, methods:this.state.files, file:{}})  \r\n      \r\n    try {\r\n      let response = await fetch(baseURL + \"/add_task\", {\r\n        mode: \"cors\",\r\n        method: 'POST',\r\n        headers: {\r\n          \"Content-Type\": 'application/vnd.custom-type'\r\n        },\r\n        body: data,\r\n      });\r\n\r\n      if (response.status == 200) {\r\n        let result = (await response.json());\r\n        if (Platform.OS == 'android') {\r\n          ToastAndroid.show(\"добавлено\", ToastAndroid.SHORT)\r\n          }else{\r\n            alert(\"добавлено\")\r\n          }\r\n        this.props.navigation.goBack()\r\n      }\r\n      else if (response.status == 401) {\r\n        console.log(\"appf\",this.props.appFunctions)\r\n        this.props.appFunctions.tryRefreshToken(this.startWithToken)\r\n      }\r\n      else {\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n        alert(result.message)\r\n      }\r\n      this.setState({ isLoading: false })\r\n    } catch (err) {\r\n      console.log('Ошибка', err);\r\n      alert(\"Возникла ошибка при обработке!\")\r\n      this.setState({ isAdded: false })\r\n      this.setState({ isLoading: false })\r\n    }\r\n  }\r\n\r\n  ItemDelete = async (key) => {\r\n    var newFiles = this.state.files.filter((_, i)=>i != key)\r\n\r\n    this.setState({ isAdded: false, resultConverted: {} })\r\n    this.setState({ files: newFiles })\r\n  }\r\n\r\n  render() {\r\n    const { navigation } = this.props;\r\n    const { resultConverted } = this.state;\r\n\r\n    let inputTextBox = \r\n      <ThemedCard>\r\n        <View >\r\n          <View >\r\n            <Text style={styles.headerText}>Название</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              onChangeText={(value)=>this.setState({title: value})}\r\n              value={this.state.title}\r\n              placeholder=\"Название\"\r\n              placeholderTextColor ={theme.colors.text2}>\r\n              </TextInput>\r\n            <Text style={styles.headerText}>Описание задачи</Text>\r\n            <TextInput\r\n              style={styles.input}\r\n              onChangeText={(value)=>this.setState({description: value})}\r\n              value={this.state.description}\r\n              placeholder=\"Описание\"\r\n              placeholderTextColor ={theme.colors.text2}\r\n              multiline ={true}\r\n              numberOfLines={4}>\r\n              </TextInput>\r\n          </View>\r\n        </View>\r\n      </ThemedCard>\r\n\r\n    let inputBox =\r\n      <ThemedCard>\r\n        <View style={styles.inputBox}>\r\n          <View style={styles.selectFileBox}>\r\n            <Button\r\n              color={theme.colors.accent}\r\n              title=\"Выбрать файл\"\r\n              disabled = {!this.state.isLoading?false:true}\r\n              onPress={() => this.ChooseFile()}\r\n            />\r\n          </View>\r\n        </View>\r\n      </ThemedCard>\r\n\r\n    let applyBox =\r\n      <ThemedCard>\r\n        <View style={styles.inputBox}>\r\n          <View>\r\n            <Button\r\n              color={theme.colors.accent}\r\n              title=\"Сохранить\"\r\n              disabled={(this.state.title !=\"\" & this.state.description !=\"\") ? false : true}\r\n              onPress={() => this.Save()}\r\n            />\r\n          </View>\r\n        </View>\r\n      </ThemedCard>\r\n\r\n    let filesListView =\r\n      this.state.files.map((prop, key) => {\r\n        return (\r\n        <View style={styles.listview} key={key}>\r\n          <View style={{ flex: 1 }}><Text style={styles.listItemHeader}>{key + 1}. {prop.name} ({this.bytesToSize(prop.size)})</Text></View>\r\n          <View style={styles.listItemButton}><Button disabled = {!this.state.isLoading?false:true} title=\"⛌\" onPress={() => this.ItemDelete(key)} color=\"#dc3545\"/></View>\r\n        </View>);\r\n      })\r\n    \r\n    let fileListBox = this.state.files.length == 0 ? <View /> :\r\n      <ThemedCard>\r\n        <View style={styles.listviewBox}>\r\n          <Text style={styles.headerText}>Список файлов</Text>\r\n          {filesListView}\r\n        </View>\r\n      </ThemedCard>\r\n    \r\n\r\n    \r\n\r\n    return (\r\n      <ScrollView style={styles.mainScroll} contentContainerStyle={{flexDirection:'row', justifyContent: 'center'}}>\r\n        <View style={styles.container}>\r\n          {inputTextBox}\r\n          {inputBox}\r\n          {fileListBox}\r\n          {applyBox}\r\n\r\n        </View>\r\n      </ScrollView>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  mainScroll: {\r\n    backgroundColor: theme.colors.background,\r\n  },\r\n  input:{\r\n    margin: marginComponent,\r\n    padding:paddingComponent,\r\n    borderWidth: borderWidth,\r\n    borderRadius:borderRadius,\r\n    borderColor:theme.colors.accent,\r\n    color: theme.colors.text,\r\n  },\r\n  container: {\r\n    paddingBottom:16,\r\n    maxWidth:700,\r\n    flex: 1,\r\n  },\r\n  inputBox: {\r\n    flexDirection: 'column', \r\n    alignItems: \"center\",\r\n  },\r\n  headerText: {\r\n    fontSize: headerFontSize,\r\n    color: theme.colors.text,\r\n    textAlign: \"center\",\r\n    fontWeight: 'bold',\r\n    marginBottom: 12,\r\n  },\r\n  disclaimer: {\r\n    fontSize: 11,\r\n    textAlign: 'center',\r\n    marginBottom: 10,\r\n    color: theme.colors.text2,\r\n  },\r\n  selectFileBox: {\r\n    alignItems: \"center\",\r\n    flexDirection: 'row',\r\n  },\r\n  listviewBox: {\r\n    flexDirection: 'column',\r\n  },\r\n  listview: {\r\n    backgroundColor: theme.colors.background,\r\n    borderRadius: 4,\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    margin: 4,\r\n    flex: 1,\r\n  },\r\n  listItemHeader: {\r\n    color: theme.colors.text2,\r\n    margin: 10,\r\n    ...Platform.select({\r\n      android: {\r\n        fontSize: 12,\r\n      },\r\n      default: {\r\n        fontSize: 15,\r\n      }\r\n    }),\r\n  },\r\n  listItemButton: {\r\n    ...Platform.select({\r\n      android: {\r\n        marginLeft: 6,\r\n      },\r\n      default: {\r\n        marginLeft: 8,\r\n      }\r\n    }),\r\n  },\r\n  convertFileBox: {\r\n    alignSelf: \"center\",\r\n    flexDirection: 'row',\r\n    marginTop: 10\r\n  },\r\n  downloadFileBox: {\r\n    justifyContent: \"center\",\r\n    alignSelf: \"center\",\r\n    marginTop: 10\r\n  },\r\n});\r\n\r\nexport default AddTaskActivity;\r\n","// App.js - WEB\r\nimport React, { Component } from \"react\";\r\nimport { View, Button, StyleSheet } from \"react-native\";\r\n\r\nimport WebRoutesGenerator from \"./NativeWebRouteWrapper\";\r\nimport { ModalContainer } from \"react-router-modal\";\r\n\r\nimport TopNavStudent from \"./TopNavStudent\"\r\nimport TopNavTeacher from \"./TopNavTeacher\"\r\n\r\nimport AuthActivity from \"./authorization_module/AuthActivity\"\r\nimport ChatRoomsActivity from \"./chat_module/ChatRoomsActivity\"\r\nimport ChatActivity from \"./chat_module/ChatActivity\"\r\nimport ConverterActivity from \"./converter_module/ConverterActivity\"\r\nimport ScheduleActivity from './schedule_module/ScheduleActivity';\r\nimport StudentActivity from './student_module/StudentActivity';\r\nimport TeacherActivity from './teacher_module/TeacherActivity';\r\nimport TaskActivity from './task_module/TaskActivity';\r\nimport AddTaskActivity from './task_module/AddTaskActivity';\r\nimport SplashActivity from \"./SplashActivity\"\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nimport {\r\n  baseURL, mainColor\r\n} from './constants'\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n      isLoading: true,\r\n      isStudent: true,\r\n      accessToken: null,\r\n      refreshToken: null\r\n    }\r\n\r\n    this._isMounted = false;\r\n  }\r\n\r\n  componentDidMount(){\r\n    this._isMounted = true;\r\n    this.getToken()\r\n\r\n    window.addEventListener(\"resize\", this.resize.bind(this));\r\n    this.resize();\r\n  }\r\n  resize() {\r\n    this._isMounted && this.setState({innerWidth: window.innerWidth});\r\n  }\r\n  componentWillUnmount() {\r\n      window.removeEventListener(\"resize\", this.resize.bind(this));\r\n      this._isMounted = false;\r\n  }\r\n\r\n  checkToken(accessToken, refreshToken){\r\n    return !(accessToken && refreshToken)\r\n  }\r\n\r\n  getToken = async () => {\r\n    try {\r\n      const user_profile = JSON.parse(await AsyncStorage.getItem('userProfile'))\r\n      const access_token = user_profile.access_token\r\n      const refresh_token = user_profile.refresh_token\r\n      const is_student = user_profile.is_student\r\n      \r\n      this._isMounted && this.setState({accessToken:access_token, refreshToken:refresh_token, isStudent:is_student})\r\n      console.log(\"saved info:\")\r\n      console.log(\"accessToken:\", access_token)\r\n      console.log(\"refreshToken:\", refresh_token)\r\n      console.log(\"isStudent:\", is_student)\r\n    } catch(e) {\r\n    }\r\n    this._isMounted && this.setState({isLoading:false})\r\n  }\r\n\r\n  tryRefreshToken = async(callback) =>{\r\n      console.log(\"tryRefreshToken!\", callback)\r\n\r\n      const data = {access_token_cookie:this.state.accessToken,refresh_token_cookie:this.state.refreshToken}\r\n\r\n      if(!data.refresh_token_cookie) {\r\n          console.log(\"null refresh_token_cookie when refresh\")\r\n          return;\r\n      }\r\n      \r\n      let response = await fetch(baseURL+\"/refresh_token\",{\r\n        mode: \"cors\",\r\n        method:\"PUT\",\r\n        body: JSON.stringify(data),\r\n        headers:{\r\n          \"Content-Type\": \"application/json\",\r\n        }\r\n      })\r\n\r\n      \r\n      if(response.status == 200){\r\n        let result = (await response.json());\r\n\r\n        await AsyncStorage.setItem('userProfile', JSON.stringify({access_token:result.access_token, refresh_token:result.refresh_token, is_student:this.state.isStudent}))\r\n        this.appFunctions.redirect({accessToken:result.access_token, refreshToken:result.refresh_token, isStudent:this.state.isStudent})\r\n\r\n        setTimeout(()=>{callback();},250)\r\n      }\r\n      else if(response.status == 400){\r\n        try {\r\n            await AsyncStorage.removeItem('userProfile')\r\n\r\n            this.appFunctions.redirect({accessToken:null, refreshToken:null, isStudent:null})\r\n        } catch (e) {\r\n        }\r\n      }\r\n      else{\r\n        let result = await response.json()\r\n        console.log(result.message)\r\n      }\r\n  }\r\n\r\n  setToken = async({accessToken, refreshToken, isStudent}) =>{\r\n    this._isMounted && this.setState({accessToken:accessToken, refreshToken:refreshToken, isStudent:isStudent})\r\n  }\r\n\r\n  appFunctions = {redirect: this.setToken, tryRefreshToken:this.tryRefreshToken}\r\n\r\n  render() {\r\n    const {isLoading, isStudent, accessToken, refreshToken}=this.state;\r\n    if (isLoading) {\r\n      return <SplashActivity style={{ height: \"100vh\", width: \"100vw\" }} />;\r\n    }\r\n\r\n     const routeMapStudent = {\r\n       Home: {\r\n         component: StudentActivity,\r\n         path: \"/app\",\r\n         exact: true\r\n       },\r\n       Schedule: {\r\n         component: ScheduleActivity,\r\n         path: \"/app/schedule\"\r\n       },\r\n       Converter: {\r\n         component: ConverterActivity,\r\n         path: \"/app/converter\",\r\n       },\r\n       ChatRooms: {\r\n        component: ChatRoomsActivity,\r\n        path: \"/app/rooms\",\r\n      },\r\n       Chat: {\r\n         component: ChatActivity,\r\n         path: \"/app/chat/room_id=:room_id?&my_id=:my_id?\",\r\n       }\r\n     };\r\n    \r\n     const routeMapTeacher = {\r\n       Home: {\r\n         component: TeacherActivity,\r\n         path: \"/app\",\r\n         exact: true\r\n       },\r\n       Schedule: {\r\n         component: ScheduleActivity,\r\n         path: \"/app/schedule\"\r\n       },\r\n       AddTask: {\r\n        component: AddTaskActivity,\r\n        path: \"/app/add_task/date=:date?&time=:time?&group=:group?\",\r\n      },\r\n       Converter: {\r\n         component: ConverterActivity,\r\n         path: \"/app/converter\",\r\n       },\r\n       ChatRooms: {\r\n        component: ChatRoomsActivity,\r\n        path: \"/app/rooms\",\r\n      },\r\n       Chat: {\r\n         component: ChatActivity,\r\n         path: \"/app/chat/room_id=:room_id?&my_id=:my_id?\",\r\n       }\r\n     };\r\n\r\n    const routeMap = isStudent? routeMapStudent: routeMapTeacher\r\n\r\n    return (\r\n      <View style={{ height: \"100vh\", width: \"100vw\" }}>\r\n        {\r\n          this.checkToken(accessToken, refreshToken) ?\r\n            <AuthActivity \r\n            appFunctions = {this.appFunctions}/>\r\n            :\r\n            isStudent ?\r\n              <View style={{ height: \"100vh\", width: \"100vw\" }}>\r\n                <TopNavStudent />\r\n                {WebRoutesGenerator({routeMap:routeMap, appFunctions: this.appFunctions })}\r\n              </View>\r\n              :\r\n              <View style={{ height: \"100vh\", width: \"100vw\" }}>\r\n                <TopNavTeacher />\r\n                {WebRoutesGenerator({routeMap:routeMap, appFunctions: this.appFunctions })}\r\n              </View>\r\n        }\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  main: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-evenly\",\r\n    backgroundColor: mainColor\r\n  }\r\n});\r\n\r\n\r\nexport default App;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const routeMap = {\r\n//   Home: {\r\n//     component: HomeScreen,\r\n//     path: \"/\",\r\n//     exact: true\r\n//   },\r\n//   Second: {\r\n//     component: SecondScreen,\r\n//     path: \"/second\"\r\n//   },\r\n//   Schedule: {\r\n//     component: ScheduleActivity,\r\n//     path: \"/schedule\"\r\n//   },\r\n//   User: {\r\n//     component: UserScreen,\r\n//     path: \"/user/:name?\",\r\n//     exact: true\r\n//   },\r\n//   DasModal: {\r\n//     component: DasModalScreen,\r\n//     path: \"*/dasmodal\",\r\n//     modal: true\r\n//   }\r\n// };","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// index.js - WEB\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <App />\r\n  </Router>,\r\n  document.getElementById(\"root\")\r\n);\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}